const a64_0x4f73=['en_us','resolver','RED','author','compile','rolePosition','filter','updateRoles','channel','Role\x20Changes','remove','errors','Command','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','name','Reason','comparePositionTo','client','../../utils/errors','```diff\x0a','map','constructor','toBulletList','exec','It\x20allows\x20you\x20to\x20update\x20roles\x20of\x20server\x20members.','tag','../../utils/arrays','canManage','roles','test','Constants','resolveRoles','exports','return\x20/\x22\x20+\x20this\x20+\x20\x22/','ownerID','getString','updateRoles\x20--user\x20USER_ID\x20--remove-all','locale','guild','add','length','apply','updateRoles\x20--user\x20USER_ID\x20--remove\x20ROLE_ID','removeAll','tesseract','highest','send','member','COLORS','catch','MANAGE_ROLES','user','unauthorized'];(function(_0x4d22cf,_0x4f733d){const _0x2cf7c1=function(_0x28e92a){while(--_0x28e92a){_0x4d22cf['push'](_0x4d22cf['shift']());}};const _0x3bd854=function(){const _0x154e46={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x256e33,_0x127141,_0x19268d,_0x35e946){_0x35e946=_0x35e946||{};let _0x97b06a=_0x127141+'='+_0x19268d;let _0x2bd445=0x0;for(let _0x3d0839=0x0,_0x76f64c=_0x256e33['length'];_0x3d0839<_0x76f64c;_0x3d0839++){const _0x4752ac=_0x256e33[_0x3d0839];_0x97b06a+=';\x20'+_0x4752ac;const _0x11650c=_0x256e33[_0x4752ac];_0x256e33['push'](_0x11650c);_0x76f64c=_0x256e33['length'];if(_0x11650c!==!![]){_0x97b06a+='='+_0x11650c;}}_0x35e946['cookie']=_0x97b06a;},'removeCookie':function(){return'dev';},'getCookie':function(_0x5a564f,_0x2243c5){_0x5a564f=_0x5a564f||function(_0x4510f4){return _0x4510f4;};const _0x342aa7=_0x5a564f(new RegExp('(?:^|;\x20)'+_0x2243c5['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x3bc3ac=function(_0xf3e3e5,_0x586086){_0xf3e3e5(++_0x586086);};_0x3bc3ac(_0x2cf7c1,_0x4f733d);return _0x342aa7?decodeURIComponent(_0x342aa7[0x1]):undefined;}};const _0x114d62=function(){const _0x4dff80=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x4dff80['test'](_0x154e46['removeCookie']['toString']());};_0x154e46['updateCookie']=_0x114d62;let _0x414c7f='';const _0x2cefa9=_0x154e46['updateCookie']();if(!_0x2cefa9){_0x154e46['setCookie'](['*'],'counter',0x1);}else if(_0x2cefa9){_0x414c7f=_0x154e46['getCookie'](null,'counter');}else{_0x154e46['removeCookie']();}};_0x3bd854();}(a64_0x4f73,0x1a8));const a64_0x2cf7=function(_0x4d22cf,_0x4f733d){_0x4d22cf=_0x4d22cf-0x0;let _0x2cf7c1=a64_0x4f73[_0x4d22cf];return _0x2cf7c1;};const a64_0x154e46=function(){let _0x3be686=!![];return function(_0x1c768e,_0x14f5c8){const _0x203837=_0x3be686?function(){if(_0x14f5c8){const _0x19b4e1=_0x14f5c8[a64_0x2cf7('0x29')](_0x1c768e,arguments);_0x14f5c8=null;return _0x19b4e1;}}:function(){};_0x3be686=![];return _0x203837;};}();const a64_0x28e92a=a64_0x154e46(this,function(){const _0x5c4aa9=function(){const _0x4ed2b0=_0x5c4aa9[a64_0x2cf7('0x15')](a64_0x2cf7('0x21'))()[a64_0x2cf7('0x4')](a64_0x2cf7('0xd'));return!_0x4ed2b0[a64_0x2cf7('0x1d')](a64_0x28e92a);};return _0x5c4aa9();});a64_0x28e92a();'use strict';const tesseract_1=require(a64_0x2cf7('0x2c'));const arrays=require(a64_0x2cf7('0x1a'));const errors=require(a64_0x2cf7('0x12'));module[a64_0x2cf7('0x20')]=class UpdateRoles extends tesseract_1[a64_0x2cf7('0xc')]{constructor(){super(a64_0x2cf7('0x7'),{'description':a64_0x2cf7('0x18'),'triggers':[],'arguments':{'alias':{'add':'a','remove':'r','user':'u'},'array':['add',a64_0x2cf7('0xa')],'boolean':[a64_0x2cf7('0x2b')],'string':[a64_0x2cf7('0x27'),a64_0x2cf7('0xa'),a64_0x2cf7('0x33')]},'scope':'guild','owner':![],'typing':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a64_0x2cf7('0x32')],'userPermissions':[a64_0x2cf7('0x32')],'syntax':['updateRoles\x20--user\x20USER_ID\x20--add\x20ROLE_ID',a64_0x2cf7('0x2a'),a64_0x2cf7('0x24')]});this[a64_0x2cf7('0x17')]=async(_0x32f039,_0x91baf0)=>{const _0x310bdc=this[a64_0x2cf7('0x11')]['resolver']['resolveGuildMember'](_0x32f039[a64_0x2cf7('0x26')],_0x91baf0[a64_0x2cf7('0x33')]);let _0x14ec40=this['client']['resolver'][a64_0x2cf7('0x1f')](_0x32f039[a64_0x2cf7('0x26')],_0x91baf0['add']);let _0x560a0f=this[a64_0x2cf7('0x11')][a64_0x2cf7('0x1')][a64_0x2cf7('0x1f')](_0x32f039[a64_0x2cf7('0x26')],_0x91baf0[a64_0x2cf7('0xa')]);if(!_0x310bdc||!_0x14ec40[a64_0x2cf7('0x28')]&&!_0x560a0f['length'])throw new errors['CommandSyntaxError'](this[a64_0x2cf7('0xe')]);if(_0x32f039[a64_0x2cf7('0x3')]['id']!==_0x32f039['guild'][a64_0x2cf7('0x22')]&&_0x32f039[a64_0x2cf7('0x2f')][a64_0x2cf7('0x1b')](_0x310bdc)){_0x14ec40=_0x14ec40['filter'](_0x55f128=>_0x32f039['member'][a64_0x2cf7('0x1c')][a64_0x2cf7('0x2d')][a64_0x2cf7('0x10')](_0x55f128)>0x0);_0x560a0f=_0x560a0f[a64_0x2cf7('0x6')](_0x5e5cb4=>_0x32f039[a64_0x2cf7('0x2f')]['roles'][a64_0x2cf7('0x2d')][a64_0x2cf7('0x10')](_0x5e5cb4)>0x0);if(!_0x14ec40[a64_0x2cf7('0x28')]&&!_0x560a0f[a64_0x2cf7('0x28')]){return await _0x32f039[a64_0x2cf7('0x8')][a64_0x2cf7('0x2e')]({'embed':{'color':tesseract_1[a64_0x2cf7('0x1e')]['COLORS'][a64_0x2cf7('0x2')],'title':this[a64_0x2cf7('0x11')][a64_0x2cf7('0x25')]['getString'](a64_0x2cf7('0x0'),'errors',a64_0x2cf7('0x34')),'description':this[a64_0x2cf7('0x11')]['locale'][a64_0x2cf7('0x23')](a64_0x2cf7('0x0'),a64_0x2cf7('0xb'),a64_0x2cf7('0x5'),_0x32f039['author'][a64_0x2cf7('0x19')],_0x310bdc['user']['tag'])}})[a64_0x2cf7('0x31')](()=>{});}}const _0x1bcce8=_0x91baf0['_']['join']('\x20')||'-';if(_0x14ec40[a64_0x2cf7('0x28')])await _0x310bdc[a64_0x2cf7('0x1c')]['add'](_0x14ec40,_0x1bcce8);if(_0x91baf0[a64_0x2cf7('0x2b')])await _0x310bdc[a64_0x2cf7('0x1c')]['set']([],_0x1bcce8);else if(_0x560a0f[a64_0x2cf7('0x28')])await _0x310bdc[a64_0x2cf7('0x1c')]['remove'](_0x560a0f,_0x1bcce8);await _0x32f039[a64_0x2cf7('0x8')][a64_0x2cf7('0x2e')]({'embed':{'color':tesseract_1[a64_0x2cf7('0x1e')][a64_0x2cf7('0x30')]['ORANGE'],'description':this['client'][a64_0x2cf7('0x25')][a64_0x2cf7('0x23')](a64_0x2cf7('0x0'),'info','memberRoleUpdate',_0x32f039[a64_0x2cf7('0x3')][a64_0x2cf7('0x19')],_0x310bdc[a64_0x2cf7('0x33')][a64_0x2cf7('0x19')]),'fields':[{'name':a64_0x2cf7('0x9'),'value':a64_0x2cf7('0x13')+arrays[a64_0x2cf7('0x16')](_0x14ec40[a64_0x2cf7('0x14')](_0x417e6=>_0x417e6[a64_0x2cf7('0xe')]),'+')+arrays[a64_0x2cf7('0x16')](_0x560a0f[a64_0x2cf7('0x14')](_0x51bfef=>_0x51bfef[a64_0x2cf7('0xe')]),'-')+'```'},{'name':a64_0x2cf7('0xf'),'value':_0x1bcce8}],'footer':{'text':_0x310bdc['id']}}})[a64_0x2cf7('0x31')](()=>{});};}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwZGF0ZVJvbGVzLmpzIl0sIm5hbWVzIjpbInRlc3NlcmFjdF8xIiwicmVxdWlyZSIsImFycmF5cyIsImVycm9ycyIsIm1vZHVsZSIsIlVwZGF0ZVJvbGVzIiwiY29uc3RydWN0b3IiLCJfMHgzMmYwMzkiLCJfMHg5MWJhZjAiLCJfMHgzMTBiZGMiLCJfMHgxNGVjNDAiLCJfMHg1NjBhMGYiLCJfMHg1NWYxMjgiLCJfMHg1ZTVjYjQiLCJfMHgxYmNjZTgiLCJfMHg0MTdlNiIsIl8weDUxYmZlZiJdLCJtYXBwaW5ncyI6ImdoR0FBQSxhQUtBLE1BQU1BLFdBQUEsQ0FBY0MsT0FBQSxDLGtCQUFBLENBQXBCLENBQ0EsTUFBTUMsTUFBQSxDQUFTRCxPQUFBLEMsa0JBQUEsQ0FBZixDQUNBLE1BQU1FLE1BQUEsQ0FBU0YsT0FBQSxDLGtCQUFBLENBQWYsQ0FDQUcsTUFBQSxDLGtCQUFBLEVBQWlCLE1BQU1DLFdBQU4sU0FBMEJMLFdBQUEsQyxpQkFBQSxDQUFvQixDQUMzRE0sV0FBQSxFQUFjLENBQ1YsTSxpQkFBQSxDQUFxQixDLGFBQ2pCLEMsa0JBRGlCLEMsVUFFakIsQ0FBVSxFQUZPLEMsV0FHakIsQ0FBVyxDLE9BQ1AsQ0FBTyxDLEtBQ0gsQyxHQURHLEMsUUFFSCxDLEdBRkcsQyxNQUdILEMsR0FIRyxDQURBLEMsT0FNUCxDQUFPLEMsS0FBQSxDLGlCQUFBLENBTkEsQyxTQU9QLENBQVMsQyxrQkFBQSxDQVBGLEMsUUFRUCxDQUFRLEMsa0JBQUEsQyxpQkFBQSxDLGtCQUFBLENBUkQsQ0FITSxDLE9BYWpCLEMsT0FiaUIsQyxPQWNqQixDLEdBZGlCLEMsUUFlakIsQyxJQWZpQixDLFVBZ0JqQixDLEdBaEJpQixDLFdBaUJqQixDLEdBakJpQixDLG1CQWtCakIsQ0FBbUIsQyxrQkFBQSxDQWxCRixDLGlCQW1CakIsQ0FBaUIsQyxrQkFBQSxDQW5CQSxDLFFBb0JqQixDQUFRLEMsc0RBQUEsQyxrQkFBQSxDLGtCQUFBLENBcEJTLENBQXJCLEVBMEJBLEss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QUZWLEMsUUFHSCxDQUFRLENBQ0osQyxNQUNJLEMsaUJBREosQyxPQUVJLEMsa0JBQU8sQ0FDRFAsTUFBQSxDLGtCQUFBLEVBQW9CUSxTQUFBLEMsa0JBQUEsRUFBZUssUUFBQSxFQUFLQSxRQUFBLEMsaUJBQUEsQ0FBcEIsQ0FBcEIsQyxHQUFBLENBREMsQ0FFRGIsTUFBQSxDLGtCQUFBLEVBQW9CUyxTQUFBLEMsa0JBQUEsRUFBa0JLLFNBQUEsRUFBS0EsU0FBQSxDLGlCQUFBLENBQXZCLENBQXBCLEMsR0FBQSxDQUZDLEMsS0FGWCxDQURJLENBUUosQyxNQUNJLEMsaUJBREosQyxPQUVJLENBQU9GLFNBRlgsQ0FSSSxDQUhMLEMsUUFnQkgsQ0FBUSxDLE1BQ0osQ0FBTUwsU0FBQSxDLElBQUEsQ0FERixDQWhCTCxDQURnQixDQUFyQixFLGtCQUFBLEVBcUJHLElBQU0sRUFyQlQsQ0FBTixDQTNCaUMsQ0FBckMsQ0EzQlUsQ0FENkMsQ0FBL0QiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQGF1dGhvciBTYW5rYXJzYW4gS2FtcGEgKGszcm4zMXA0bmljKVxuICogQGNvcHlyaWdodCAyMDIwIC0gVGhlIEJhc3Rpb24gQm90IFByb2plY3RcbiAqL1xuY29uc3QgdGVzc2VyYWN0XzEgPSByZXF1aXJlKFwidGVzc2VyYWN0XCIpO1xuY29uc3QgYXJyYXlzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2FycmF5c1wiKTtcbmNvbnN0IGVycm9ycyA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9lcnJvcnNcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFVwZGF0ZVJvbGVzIGV4dGVuZHMgdGVzc2VyYWN0XzEuQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwidXBkYXRlUm9sZXNcIiwge1xuICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiSXQgYWxsb3dzIHlvdSB0byB1cGRhdGUgcm9sZXMgb2Ygc2VydmVyIG1lbWJlcnMuXCIsXG4gICAgICAgICAgICB0cmlnZ2VyczogW10sXG4gICAgICAgICAgICBhcmd1bWVudHM6IHtcbiAgICAgICAgICAgICAgICBhbGlhczoge1xuICAgICAgICAgICAgICAgICAgICBhZGQ6IFwiYVwiLFxuICAgICAgICAgICAgICAgICAgICByZW1vdmU6IFwiclwiLFxuICAgICAgICAgICAgICAgICAgICB1c2VyOiBcInVcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGFycmF5OiBbXCJhZGRcIiwgXCJyZW1vdmVcIl0sXG4gICAgICAgICAgICAgICAgYm9vbGVhbjogW1wicmVtb3ZlQWxsXCJdLFxuICAgICAgICAgICAgICAgIHN0cmluZzogW1wiYWRkXCIsIFwicmVtb3ZlXCIsIFwidXNlclwiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY29wZTogXCJndWlsZFwiLFxuICAgICAgICAgICAgb3duZXI6IGZhbHNlLFxuICAgICAgICAgICAgdHlwaW5nOiB0cnVlLFxuICAgICAgICAgICAgY29vbGRvd246IDAsXG4gICAgICAgICAgICByYXRlbGltaXQ6IDEsXG4gICAgICAgICAgICBjbGllbnRQZXJtaXNzaW9uczogW1wiTUFOQUdFX1JPTEVTXCJdLFxuICAgICAgICAgICAgdXNlclBlcm1pc3Npb25zOiBbXCJNQU5BR0VfUk9MRVNcIl0sXG4gICAgICAgICAgICBzeW50YXg6IFtcbiAgICAgICAgICAgICAgICBcInVwZGF0ZVJvbGVzIC0tdXNlciBVU0VSX0lEIC0tYWRkIFJPTEVfSURcIixcbiAgICAgICAgICAgICAgICBcInVwZGF0ZVJvbGVzIC0tdXNlciBVU0VSX0lEIC0tcmVtb3ZlIFJPTEVfSURcIixcbiAgICAgICAgICAgICAgICBcInVwZGF0ZVJvbGVzIC0tdXNlciBVU0VSX0lEIC0tcmVtb3ZlLWFsbFwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhlYyA9IGFzeW5jIChtZXNzYWdlLCBhcmd2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtZW1iZXIgPSB0aGlzLmNsaWVudC5yZXNvbHZlci5yZXNvbHZlR3VpbGRNZW1iZXIobWVzc2FnZS5ndWlsZCwgYXJndi51c2VyKTtcbiAgICAgICAgICAgIGxldCByb2xlc1RvQWRkID0gdGhpcy5jbGllbnQucmVzb2x2ZXIucmVzb2x2ZVJvbGVzKG1lc3NhZ2UuZ3VpbGQsIGFyZ3YuYWRkKTtcbiAgICAgICAgICAgIGxldCByb2xlc1RvUmVtb3ZlID0gdGhpcy5jbGllbnQucmVzb2x2ZXIucmVzb2x2ZVJvbGVzKG1lc3NhZ2UuZ3VpbGQsIGFyZ3YucmVtb3ZlKTtcbiAgICAgICAgICAgIGlmICghbWVtYmVyIHx8ICghcm9sZXNUb0FkZC5sZW5ndGggJiYgIXJvbGVzVG9SZW1vdmUubGVuZ3RoKSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgZXJyb3JzLkNvbW1hbmRTeW50YXhFcnJvcih0aGlzLm5hbWUpO1xuICAgICAgICAgICAgaWYgKG1lc3NhZ2UuYXV0aG9yLmlkICE9PSBtZXNzYWdlLmd1aWxkLm93bmVySUQgJiYgbWVzc2FnZS5tZW1iZXIuY2FuTWFuYWdlKG1lbWJlcikpIHtcbiAgICAgICAgICAgICAgICByb2xlc1RvQWRkID0gcm9sZXNUb0FkZC5maWx0ZXIociA9PiBtZXNzYWdlLm1lbWJlci5yb2xlcy5oaWdoZXN0LmNvbXBhcmVQb3NpdGlvblRvKHIpID4gMCk7XG4gICAgICAgICAgICAgICAgcm9sZXNUb1JlbW92ZSA9IHJvbGVzVG9SZW1vdmUuZmlsdGVyKHIgPT4gbWVzc2FnZS5tZW1iZXIucm9sZXMuaGlnaGVzdC5jb21wYXJlUG9zaXRpb25UbyhyKSA+IDApO1xuICAgICAgICAgICAgICAgIGlmICgoIXJvbGVzVG9BZGQubGVuZ3RoICYmICFyb2xlc1RvUmVtb3ZlLmxlbmd0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRlc3NlcmFjdF8xLkNvbnN0YW50cy5DT0xPUlMuUkVELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJlcnJvcnNcIiwgXCJ1bmF1dGhvcml6ZWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuY2xpZW50LmxvY2FsZS5nZXRTdHJpbmcoXCJlbl91c1wiLCBcImVycm9yc1wiLCBcInJvbGVQb3NpdGlvblwiLCBtZXNzYWdlLmF1dGhvci50YWcsIG1lbWJlci51c2VyLnRhZyksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlYXNvbiA9IGFyZ3YuXy5qb2luKFwiIFwiKSB8fCBcIi1cIjtcbiAgICAgICAgICAgIGlmIChyb2xlc1RvQWRkLmxlbmd0aClcbiAgICAgICAgICAgICAgICBhd2FpdCBtZW1iZXIucm9sZXMuYWRkKHJvbGVzVG9BZGQsIHJlYXNvbik7XG4gICAgICAgICAgICBpZiAoYXJndi5yZW1vdmVBbGwpXG4gICAgICAgICAgICAgICAgYXdhaXQgbWVtYmVyLnJvbGVzLnNldChbXSwgcmVhc29uKTtcbiAgICAgICAgICAgIGVsc2UgaWYgKHJvbGVzVG9SZW1vdmUubGVuZ3RoKVxuICAgICAgICAgICAgICAgIGF3YWl0IG1lbWJlci5yb2xlcy5yZW1vdmUocm9sZXNUb1JlbW92ZSwgcmVhc29uKTtcbiAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKHtcbiAgICAgICAgICAgICAgICBlbWJlZDoge1xuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzc2VyYWN0XzEuQ29uc3RhbnRzLkNPTE9SUy5PUkFOR0UsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJpbmZvXCIsIFwibWVtYmVyUm9sZVVwZGF0ZVwiLCBtZXNzYWdlLmF1dGhvci50YWcsIG1lbWJlci51c2VyLnRhZyksXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUm9sZSBDaGFuZ2VzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiYGBgZGlmZlxcblwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgYXJyYXlzLnRvQnVsbGV0TGlzdChyb2xlc1RvQWRkLm1hcChyID0+IHIubmFtZSksIFwiK1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIGFycmF5cy50b0J1bGxldExpc3Qocm9sZXNUb1JlbW92ZS5tYXAociA9PiByLm5hbWUpLCBcIi1cIilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyBcImBgYFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIlJlYXNvblwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiByZWFzb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICAgICBmb290ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lbWJlci5pZCxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxufTsiXX0=