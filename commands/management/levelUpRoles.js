const a52_0x2d36=['join','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','role','remove','NO_ROLES_FOR_LEVEL','cache','channel','Command','name','author','roles','clamp','push','length','RED','COLORS','../../utils/gamification','resolver','level','tag','save','locale','en_us','levelUpRoles','Constants','../../utils/numbers','constructor','send','info','getString','roleNotFound','_id','return\x20/\x22\x20+\x20this\x20+\x20\x22/','map','apply','Level\x20','levelUpRoles\x20--level\x20NUMBER','exports','find','get','../../models/Role','has','compile','client','default','resolveRoles','keys','roleLevelClear','It\x20allows\x20you\x20to\x20add\x20roles\x20to\x20a\x20level.\x20When\x20members\x20reach\x20that\x20level,\x20they\x27ll\x20be\x20awarded\x20those\x20roles.','exec','guild','MANAGE_ROLES','IRIS','catch','roleLevelAdd'];(function(_0x59a6e1,_0x2d362b){const _0x49b638=function(_0x350fb3){while(--_0x350fb3){_0x59a6e1['push'](_0x59a6e1['shift']());}};const _0x59c0dc=function(){const _0x5c1db5={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x7d2453,_0x4a8b8b,_0x4f5993,_0x5ec46d){_0x5ec46d=_0x5ec46d||{};let _0x87c8c7=_0x4a8b8b+'='+_0x4f5993;let _0x5c0e67=0x0;for(let _0x243125=0x0,_0x371779=_0x7d2453['length'];_0x243125<_0x371779;_0x243125++){const _0x228a62=_0x7d2453[_0x243125];_0x87c8c7+=';\x20'+_0x228a62;const _0x2faa06=_0x7d2453[_0x228a62];_0x7d2453['push'](_0x2faa06);_0x371779=_0x7d2453['length'];if(_0x2faa06!==!![]){_0x87c8c7+='='+_0x2faa06;}}_0x5ec46d['cookie']=_0x87c8c7;},'removeCookie':function(){return'dev';},'getCookie':function(_0x4e5472,_0x2b13fc){_0x4e5472=_0x4e5472||function(_0x251988){return _0x251988;};const _0x4bfdf5=_0x4e5472(new RegExp('(?:^|;\x20)'+_0x2b13fc['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x1d017e=function(_0x20b8da,_0x94a40d){_0x20b8da(++_0x94a40d);};_0x1d017e(_0x49b638,_0x2d362b);return _0x4bfdf5?decodeURIComponent(_0x4bfdf5[0x1]):undefined;}};const _0xe35254=function(){const _0x5deb96=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x5deb96['test'](_0x5c1db5['removeCookie']['toString']());};_0x5c1db5['updateCookie']=_0xe35254;let _0x38ef46='';const _0x6fad7=_0x5c1db5['updateCookie']();if(!_0x6fad7){_0x5c1db5['setCookie'](['*'],'counter',0x1);}else if(_0x6fad7){_0x38ef46=_0x5c1db5['getCookie'](null,'counter');}else{_0x5c1db5['removeCookie']();}};_0x59c0dc();}(a52_0x2d36,0x1dc));const a52_0x49b6=function(_0x59a6e1,_0x2d362b){_0x59a6e1=_0x59a6e1-0x0;let _0x49b638=a52_0x2d36[_0x59a6e1];return _0x49b638;};const a52_0x5c1db5=function(){let _0x247d6b=!![];return function(_0x45e39e,_0x1314d2){const _0x1c9a54=_0x247d6b?function(){if(_0x1314d2){const _0x16b94a=_0x1314d2[a52_0x49b6('0x35')](_0x45e39e,arguments);_0x1314d2=null;return _0x16b94a;}}:function(){};_0x247d6b=![];return _0x1c9a54;};}();const a52_0x350fb3=a52_0x5c1db5(this,function(){const _0x6c24ae=function(){const _0x216696=_0x6c24ae[a52_0x49b6('0x2d')](a52_0x49b6('0x33'))()[a52_0x49b6('0x6')](a52_0x49b6('0x14'));return!_0x216696['test'](a52_0x350fb3);};return _0x6c24ae();});a52_0x350fb3();'use strict';const tesseract_1=require('tesseract');const Role_1=require(a52_0x49b6('0x4'));const errors=require('../../utils/errors');const gamification=require(a52_0x49b6('0x23'));const numbers=require(a52_0x49b6('0x2c'));module[a52_0x49b6('0x1')]=class LevelUpRolesCommand extends tesseract_1[a52_0x49b6('0x1a')]{constructor(){super('levelUpRoles',{'description':a52_0x49b6('0xc'),'triggers':[],'arguments':{'array':['role'],'boolean':[a52_0x49b6('0x16')],'string':[a52_0x49b6('0x15')],'number':[a52_0x49b6('0x25')],'coerce':{'level':_0xff2a68=>numbers[a52_0x49b6('0x1e')](_0xff2a68,0x1,gamification['MAX_LEVEL'])}},'scope':a52_0x49b6('0xe'),'owner':![],'typing':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a52_0x49b6('0xf')],'userPermissions':[a52_0x49b6('0xf')],'syntax':[a52_0x49b6('0x2a'),a52_0x49b6('0x0'),'levelUpRoles\x20--level\x20NUMBER\x20--role\x20ROLE','levelUpRoles\x20--level\x20NUMBER\x20--remove']});this[a52_0x49b6('0xd')]=async(_0x55f288,_0x30b0d7)=>{if(_0x30b0d7[a52_0x49b6('0x25')]){if(_0x30b0d7[a52_0x49b6('0x15')]){const _0x371f10=this['client'][a52_0x49b6('0x24')]['resolveRole'](_0x55f288[a52_0x49b6('0xe')],_0x30b0d7['role'][a52_0x49b6('0x13')]('\x20'));if(!_0x371f10)throw new errors['RoleNotFound'](this[a52_0x49b6('0x7')][a52_0x49b6('0x28')][a52_0x49b6('0x30')]('en_us','info',a52_0x49b6('0x31')));let _0x5470f4=await _0x371f10['fetchDocument']();if(!_0x5470f4&&_0x30b0d7['emoji']){_0x5470f4=await _0x371f10['createDocument']();}_0x5470f4[a52_0x49b6('0x25')]=_0x30b0d7[a52_0x49b6('0x25')];await _0x5470f4[a52_0x49b6('0x27')]();return await _0x55f288['channel'][a52_0x49b6('0x2e')]({'embed':{'color':tesseract_1['Constants']['COLORS']['GREEN'],'description':this[a52_0x49b6('0x7')]['locale']['getString']('en_us',a52_0x49b6('0x2f'),a52_0x49b6('0x12'),_0x55f288[a52_0x49b6('0x1c')][a52_0x49b6('0x26')],_0x371f10[a52_0x49b6('0x1b')],_0x30b0d7[a52_0x49b6('0x25')])}})[a52_0x49b6('0x11')](()=>{});}if(_0x30b0d7[a52_0x49b6('0x16')]){await Role_1[a52_0x49b6('0x8')]['updateMany']({'guild':_0x55f288[a52_0x49b6('0xe')]['id'],'level':_0x30b0d7['level']},{'level':undefined});return await _0x55f288['channel'][a52_0x49b6('0x2e')]({'embed':{'color':tesseract_1['Constants']['COLORS'][a52_0x49b6('0x21')],'description':this['client'][a52_0x49b6('0x28')]['getString'](a52_0x49b6('0x29'),a52_0x49b6('0x2f'),a52_0x49b6('0xb'),_0x55f288[a52_0x49b6('0x1c')][a52_0x49b6('0x26')],_0x30b0d7[a52_0x49b6('0x25')])}})['catch'](()=>{});}const _0x51aa55=await Role_1[a52_0x49b6('0x8')][a52_0x49b6('0x2')]({'guild':_0x55f288[a52_0x49b6('0xe')]['id'],'level':_0x30b0d7[a52_0x49b6('0x25')]});if(!_0x51aa55[a52_0x49b6('0x20')])throw new Error(a52_0x49b6('0x17'));const _0x1c6a79=this[a52_0x49b6('0x7')][a52_0x49b6('0x24')][a52_0x49b6('0x9')](_0x55f288['guild'],_0x51aa55[a52_0x49b6('0x34')](_0x1ad7f4=>_0x1ad7f4[a52_0x49b6('0x32')]));return await _0x55f288[a52_0x49b6('0x19')]['send']({'embed':{'color':tesseract_1[a52_0x49b6('0x2b')][a52_0x49b6('0x22')][a52_0x49b6('0x10')],'title':a52_0x49b6('0x36')+_0x30b0d7[a52_0x49b6('0x25')],'fields':[{'name':'Roles','value':_0x1c6a79[a52_0x49b6('0x34')](_0x1c81bb=>_0x1c81bb[a52_0x49b6('0x1b')])[a52_0x49b6('0x13')]('\x0a')}]}})['catch'](()=>{});}const _0x19983d=await Role_1[a52_0x49b6('0x8')][a52_0x49b6('0x2')]({'guild':_0x55f288[a52_0x49b6('0xe')]['id'],'level':{'$exists':!![],'$ne':null}});if(!_0x19983d[a52_0x49b6('0x20')])throw new Error('NO_LEVEL_UP_ROLES');const _0xa527b6={};for(const _0x33122f of _0x19983d){if(_0x33122f['level']in _0xa527b6){_0xa527b6[_0x33122f[a52_0x49b6('0x25')]][a52_0x49b6('0x1f')](_0x33122f[a52_0x49b6('0x32')]);}else{_0xa527b6[_0x33122f[a52_0x49b6('0x25')]]=[_0x33122f[a52_0x49b6('0x32')]];}}return await _0x55f288[a52_0x49b6('0x19')][a52_0x49b6('0x2e')]({'embed':{'color':tesseract_1[a52_0x49b6('0x2b')][a52_0x49b6('0x22')][a52_0x49b6('0x10')],'title':'Level-Up\x20Roles','fields':Object[a52_0x49b6('0xa')](_0xa527b6)[a52_0x49b6('0x34')](_0x45fcf4=>({'name':a52_0x49b6('0x36')+_0x45fcf4,'value':_0xa527b6[_0x45fcf4][a52_0x49b6('0x34')](_0x5a8735=>_0x55f288[a52_0x49b6('0xe')]['roles']['cache'][a52_0x49b6('0x5')](_0x5a8735)?_0x55f288['guild'][a52_0x49b6('0x1d')][a52_0x49b6('0x18')][a52_0x49b6('0x3')](_0x5a8735)['name']:_0x5a8735)['join'](',\x20')}))}})[a52_0x49b6('0x11')](()=>{});};}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxldmVsVXBSb2xlcy5qcyJdLCJuYW1lcyI6WyJ0ZXNzZXJhY3RfMSIsInJlcXVpcmUiLCJSb2xlXzEiLCJlcnJvcnMiLCJnYW1pZmljYXRpb24iLCJudW1iZXJzIiwibW9kdWxlIiwiTGV2ZWxVcFJvbGVzQ29tbWFuZCIsImNvbnN0cnVjdG9yIiwiXzB4ZmYyYTY4IiwiXzB4NTVmMjg4IiwiXzB4MzBiMGQ3IiwiXzB4MzcxZjEwIiwiXzB4NTQ3MGY0IiwidW5kZWZpbmVkIiwiXzB4NTFhYTU1IiwiRXJyb3IiLCJfMHgxYzZhNzkiLCJfMHgxYWQ3ZjQiLCJfMHgxYzgxYmIiLCJfMHgxOTk4M2QiLCJfMHhhNTI3YjYiLCJfMHgzMzEyMmYiLCJPYmplY3QiLCJfMHg0NWZjZjQiLCJfMHg1YTg3MzUiXSwibWFwcGluZ3MiOiJzaEdBQUEsYUFLQSxNQUFNQSxXQUFBLENBQWNDLE9BQUEsQyxXQUFBLENBQXBCLENBQ0EsTUFBTUMsTUFBQSxDQUFTRCxPQUFBLEMsaUJBQUEsQ0FBZixDQUNBLE1BQU1FLE1BQUEsQ0FBU0YsT0FBQSxDLG9CQUFBLENBQWYsQ0FDQSxNQUFNRyxZQUFBLENBQWVILE9BQUEsQyxrQkFBQSxDQUFyQixDQUNBLE1BQU1JLE9BQUEsQ0FBVUosT0FBQSxDLGtCQUFBLENBQWhCLENBQ0FLLE1BQUEsQyxpQkFBQSxFQUFpQixNQUFNQyxtQkFBTixTQUFrQ1AsV0FBQSxDLGtCQUFBLENBQW9CLENBQ25FUSxXQUFBLEVBQWMsQ0FDVixNLGNBQUEsQ0FBc0IsQyxhQUNsQixDLGlCQURrQixDLFVBRWxCLENBQVUsRUFGUSxDLFdBR2xCLENBQVcsQyxPQUNQLENBQU8sQyxNQUFBLENBREEsQyxTQUVQLENBQVMsQyxrQkFBQSxDQUZGLEMsUUFHUCxDQUFRLEMsa0JBQUEsQ0FIRCxDLFFBSVAsQ0FBUSxDLGtCQUFBLENBSkQsQyxRQUtQLENBQVEsQyxPQUNKLENBQVFDLFNBQUQsRUFBU0osT0FBQSxDLGtCQUFBLEVBQWNJLFNBQWQsQyxHQUFBLENBQXNC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QUppQixDQVExQixPQUFPLE1BQU1aLFNBQUEsQyxrQkFBQSxFLGtCQUFBLEVBQXFCLEMsT0FDOUIsQ0FBTyxDLE9BQ0gsQ0FBT1YsV0FBQSxDLGtCQUFBLEUsa0JBQUEsRSxrQkFBQSxDQURKLEMsT0FFSCxDLG1CQUZHLEMsUUFHSCxDQUFRdUIsTUFBQSxDLGlCQUFBLEVBQVlGLFNBQVosRSxrQkFBQSxFQUE0QkcsU0FBQSxHQUFVLEMsTUFDMUMsQyxrQkFBTSxDQUFXQSxTQUR5QixDLE9BRTFDLENBQU9ILFNBQUEsQ0FBV0csU0FBWCxFLGtCQUFBLEVBQXNCQyxTQUFBLEVBQU1mLFNBQUEsQyxpQkFBQSxFLE9BQUEsRSxPQUFBLEUsaUJBQUEsRUFBOEJlLFNBQTlCLEVBQW9DZixTQUFBLEMsT0FBQSxFLGtCQUFBLEUsa0JBQUEsRSxpQkFBQSxFQUE4QmUsU0FBOUIsRSxNQUFBLENBQXBDLENBQTZFQSxTQUF6RyxFLE1BQUEsRSxPQUFBLENBRm1DLENBQVYsQ0FBNUIsQ0FITCxDQUR1QixDQUFyQixFLGtCQUFBLEVBU0osSUFBTSxFQVRGLENBQWIsQ0F2RWlDLENBQXJDLENBM0JVLENBRHFELENBQXZFIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG4vKiFcbiAqIEBhdXRob3IgU2Fua2Fyc2FuIEthbXBhIChrM3JuMzFwNG5pYylcbiAqIEBjb3B5cmlnaHQgMjAyMCAtIFRoZSBCYXN0aW9uIEJvdCBQcm9qZWN0XG4gKi9cbmNvbnN0IHRlc3NlcmFjdF8xID0gcmVxdWlyZShcInRlc3NlcmFjdFwiKTtcbmNvbnN0IFJvbGVfMSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvUm9sZVwiKTtcbmNvbnN0IGVycm9ycyA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9lcnJvcnNcIik7XG5jb25zdCBnYW1pZmljYXRpb24gPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvZ2FtaWZpY2F0aW9uXCIpO1xuY29uc3QgbnVtYmVycyA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9udW1iZXJzXCIpO1xubW9kdWxlLmV4cG9ydHMgPSBjbGFzcyBMZXZlbFVwUm9sZXNDb21tYW5kIGV4dGVuZHMgdGVzc2VyYWN0XzEuQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwibGV2ZWxVcFJvbGVzXCIsIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkl0IGFsbG93cyB5b3UgdG8gYWRkIHJvbGVzIHRvIGEgbGV2ZWwuIFdoZW4gbWVtYmVycyByZWFjaCB0aGF0IGxldmVsLCB0aGV5J2xsIGJlIGF3YXJkZWQgdGhvc2Ugcm9sZXMuXCIsXG4gICAgICAgICAgICB0cmlnZ2VyczogW10sXG4gICAgICAgICAgICBhcmd1bWVudHM6IHtcbiAgICAgICAgICAgICAgICBhcnJheTogW1wicm9sZVwiXSxcbiAgICAgICAgICAgICAgICBib29sZWFuOiBbXCJyZW1vdmVcIl0sXG4gICAgICAgICAgICAgICAgc3RyaW5nOiBbXCJyb2xlXCJdLFxuICAgICAgICAgICAgICAgIG51bWJlcjogW1wibGV2ZWxcIl0sXG4gICAgICAgICAgICAgICAgY29lcmNlOiB7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsOiAoYXJnKSA9PiBudW1iZXJzLmNsYW1wKGFyZywgMSwgZ2FtaWZpY2F0aW9uLk1BWF9MRVZFTCksXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY29wZTogXCJndWlsZFwiLFxuICAgICAgICAgICAgb3duZXI6IGZhbHNlLFxuICAgICAgICAgICAgdHlwaW5nOiB0cnVlLFxuICAgICAgICAgICAgY29vbGRvd246IDAsXG4gICAgICAgICAgICByYXRlbGltaXQ6IDEsXG4gICAgICAgICAgICBjbGllbnRQZXJtaXNzaW9uczogW1wiTUFOQUdFX1JPTEVTXCJdLFxuICAgICAgICAgICAgdXNlclBlcm1pc3Npb25zOiBbXCJNQU5BR0VfUk9MRVNcIl0sXG4gICAgICAgICAgICBzeW50YXg6IFtcbiAgICAgICAgICAgICAgICBcImxldmVsVXBSb2xlc1wiLFxuICAgICAgICAgICAgICAgIFwibGV2ZWxVcFJvbGVzIC0tbGV2ZWwgTlVNQkVSXCIsXG4gICAgICAgICAgICAgICAgXCJsZXZlbFVwUm9sZXMgLS1sZXZlbCBOVU1CRVIgLS1yb2xlIFJPTEVcIixcbiAgICAgICAgICAgICAgICBcImxldmVsVXBSb2xlcyAtLWxldmVsIE5VTUJFUiAtLXJlbW92ZVwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhlYyA9IGFzeW5jIChtZXNzYWdlLCBhcmd2KSA9PiB7XG4gICAgICAgICAgICBpZiAoYXJndi5sZXZlbCkge1xuICAgICAgICAgICAgICAgIGlmIChhcmd2LnJvbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHRoaXMuY2xpZW50LnJlc29sdmVyLnJlc29sdmVSb2xlKG1lc3NhZ2UuZ3VpbGQsIGFyZ3Yucm9sZS5qb2luKFwiIFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm9sZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuUm9sZU5vdEZvdW5kKHRoaXMuY2xpZW50LmxvY2FsZS5nZXRTdHJpbmcoXCJlbl91c1wiLCBcImluZm9cIiwgXCJyb2xlTm90Rm91bmRcIikpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm9sZURvY3VtZW50ID0gYXdhaXQgcm9sZS5mZXRjaERvY3VtZW50KCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghcm9sZURvY3VtZW50ICYmIGFyZ3YuZW1vamkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVEb2N1bWVudCA9IGF3YWl0IHJvbGUuY3JlYXRlRG9jdW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByb2xlRG9jdW1lbnQubGV2ZWwgPSBhcmd2LmxldmVsO1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCByb2xlRG9jdW1lbnQuc2F2ZSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgZW1iZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzc2VyYWN0XzEuQ29uc3RhbnRzLkNPTE9SUy5HUkVFTixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jbGllbnQubG9jYWxlLmdldFN0cmluZyhcImVuX3VzXCIsIFwiaW5mb1wiLCBcInJvbGVMZXZlbEFkZFwiLCBtZXNzYWdlLmF1dGhvci50YWcsIHJvbGUubmFtZSwgYXJndi5sZXZlbCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYXJndi5yZW1vdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUm9sZV8xLmRlZmF1bHQudXBkYXRlTWFueSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBndWlsZDogbWVzc2FnZS5ndWlsZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBhcmd2LmxldmVsLFxuICAgICAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRlc3NlcmFjdF8xLkNvbnN0YW50cy5DT0xPUlMuUkVELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJpbmZvXCIsIFwicm9sZUxldmVsQ2xlYXJcIiwgbWVzc2FnZS5hdXRob3IudGFnLCBhcmd2LmxldmVsKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHJvbGVzID0gYXdhaXQgUm9sZV8xLmRlZmF1bHQuZmluZCh7XG4gICAgICAgICAgICAgICAgICAgIGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkLFxuICAgICAgICAgICAgICAgICAgICBsZXZlbDogYXJndi5sZXZlbCxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvbGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTk9fUk9MRVNfRk9SX0xFVkVMXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGxldmVsUm9sZXMgPSB0aGlzLmNsaWVudC5yZXNvbHZlci5yZXNvbHZlUm9sZXMobWVzc2FnZS5ndWlsZCwgcm9sZXMubWFwKHIgPT4gci5faWQpKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlbWJlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRlc3NlcmFjdF8xLkNvbnN0YW50cy5DT0xPUlMuSVJJUyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxldmVsIFwiICsgYXJndi5sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSb2xlc1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbGV2ZWxSb2xlcy5tYXAociA9PiByLm5hbWUpLmpvaW4oXCJcXG5cIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByb2xlcyA9IGF3YWl0IFJvbGVfMS5kZWZhdWx0LmZpbmQoe1xuICAgICAgICAgICAgICAgIGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkLFxuICAgICAgICAgICAgICAgIGxldmVsOiB7ICRleGlzdHM6IHRydWUsICRuZTogbnVsbCwgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKCFyb2xlcy5sZW5ndGgpXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTk9fTEVWRUxfVVBfUk9MRVNcIik7XG4gICAgICAgICAgICBjb25zdCBsZXZlbFJvbGVzID0ge307XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHJvbGUgb2Ygcm9sZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocm9sZS5sZXZlbCBpbiBsZXZlbFJvbGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldmVsUm9sZXNbcm9sZS5sZXZlbF0ucHVzaChyb2xlLl9pZCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXZlbFJvbGVzW3JvbGUubGV2ZWxdID0gW3JvbGUuX2lkXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0ZXNzZXJhY3RfMS5Db25zdGFudHMuQ09MT1JTLklSSVMsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIkxldmVsLVVwIFJvbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogT2JqZWN0LmtleXMobGV2ZWxSb2xlcykubWFwKGxldmVsID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkxldmVsIFwiICsgbGV2ZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbGV2ZWxSb2xlc1tsZXZlbF0ubWFwKGlkID0+IG1lc3NhZ2UuZ3VpbGQucm9sZXMuY2FjaGUuaGFzKGlkKSA/IG1lc3NhZ2UuZ3VpbGQucm9sZXMuY2FjaGUuZ2V0KGlkKS5uYW1lIDogaWQpLmpvaW4oXCIsIFwiKSxcbiAgICAgICAgICAgICAgICAgICAgfSkpLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG59OyJdfQ==