const a12_0x48ae=['getString','parseEmoji','responseReaction','MANAGE_GUILD','triggersAdd','RED','COLORS','Command','reaction','tesseract','send','guild','clear','Message\x20Response','triggers','en_us','triggers\x20--pattern\x20PATTERN\x20--\x20RESPONSE','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','exports','catch','default','locale','client','triggersList','length','constructor','find','../../utils/emojis','Constants','push','author','IRIS','create','../../models/Trigger','channel','Response\x20Message','value','Response\x20Reaction','info','pattern','tag','join','compile','GREEN','trigger','apply','map'];(function(_0x114ce2,_0x48aed2){const _0x43e226=function(_0x481eab){while(--_0x481eab){_0x114ce2['push'](_0x114ce2['shift']());}};const _0x3a75b2=function(){const _0x4d1087={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1f221e,_0x45f8ae,_0x5d386f,_0x42680f){_0x42680f=_0x42680f||{};let _0x17bdf0=_0x45f8ae+'='+_0x5d386f;let _0x38701e=0x0;for(let _0x98dae=0x0,_0x2b3fe6=_0x1f221e['length'];_0x98dae<_0x2b3fe6;_0x98dae++){const _0xdd8b10=_0x1f221e[_0x98dae];_0x17bdf0+=';\x20'+_0xdd8b10;const _0x4eea71=_0x1f221e[_0xdd8b10];_0x1f221e['push'](_0x4eea71);_0x2b3fe6=_0x1f221e['length'];if(_0x4eea71!==!![]){_0x17bdf0+='='+_0x4eea71;}}_0x42680f['cookie']=_0x17bdf0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x2ca7a2,_0x3dd7ec){_0x2ca7a2=_0x2ca7a2||function(_0x167b84){return _0x167b84;};const _0x422cdd=_0x2ca7a2(new RegExp('(?:^|;\x20)'+_0x3dd7ec['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x16b20d=function(_0x101a30,_0x4c1d91){_0x101a30(++_0x4c1d91);};_0x16b20d(_0x43e226,_0x48aed2);return _0x422cdd?decodeURIComponent(_0x422cdd[0x1]):undefined;}};const _0x16b96a=function(){const _0x3487e4=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3487e4['test'](_0x4d1087['removeCookie']['toString']());};_0x4d1087['updateCookie']=_0x16b96a;let _0x412139='';const _0x4c7c0c=_0x4d1087['updateCookie']();if(!_0x4c7c0c){_0x4d1087['setCookie'](['*'],'counter',0x1);}else if(_0x4c7c0c){_0x412139=_0x4d1087['getCookie'](null,'counter');}else{_0x4d1087['removeCookie']();}};_0x3a75b2();}(a12_0x48ae,0xac));const a12_0x43e2=function(_0x114ce2,_0x48aed2){_0x114ce2=_0x114ce2-0x0;let _0x43e226=a12_0x48ae[_0x114ce2];return _0x43e226;};const a12_0x4d1087=function(){let _0x401d4a=!![];return function(_0x5e66fc,_0x922cbe){const _0x3431d5=_0x401d4a?function(){if(_0x922cbe){const _0x41f07f=_0x922cbe[a12_0x43e2('0xe')](_0x5e66fc,arguments);_0x922cbe=null;return _0x41f07f;}}:function(){};_0x401d4a=![];return _0x3431d5;};}();const a12_0x481eab=a12_0x4d1087(this,function(){const _0x7b0c6a=function(){const _0x21bc6b=_0x7b0c6a[a12_0x43e2('0x29')]('return\x20/\x22\x20+\x20this\x20+\x20\x22/')()[a12_0x43e2('0xb')](a12_0x43e2('0x21'));return!_0x21bc6b['test'](a12_0x481eab);};return _0x7b0c6a();});a12_0x481eab();'use strict';const tesseract_1=require(a12_0x43e2('0x19'));const emojis=require(a12_0x43e2('0x2b'));const Trigger_1=require(a12_0x43e2('0x2'));module[a12_0x43e2('0x22')]=class MessageFilterCommand extends tesseract_1[a12_0x43e2('0x17')]{constructor(){super(a12_0x43e2('0x1e'),{'description':'It\x20allows\x20you\x20to\x20add\x20(and\x20remove)\x20Triggers\x20in\x20the\x20server.\x20When\x20a\x20trigger\x20is\x20set,\x20and\x20Bastion\x20sees\x20a\x20message\x20from\x20a\x20human\x20containing\x20the\x20pattern\x20specified\x20in\x20the\x20trigger,\x20it\x27ll\x20respond\x20with\x20either\x20the\x20specified\x20response\x20message\x20or\x20reaction,\x20or\x20both.','triggers':[],'arguments':{'alias':{'clear':['c'],'pattern':['p'],'reaction':['e']},'boolean':[a12_0x43e2('0x1c')],'array':[a12_0x43e2('0x8')],'string':[a12_0x43e2('0x8'),a12_0x43e2('0x18')]},'scope':a12_0x43e2('0x1b'),'owner':!![],'typing':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[a12_0x43e2('0x13')],'syntax':['triggers',a12_0x43e2('0x20'),'triggers\x20--pattern\x20PATTERN\x20--reaction\x20EMOJI','triggers\x20--clear']});this['exec']=async(_0x201116,_0x353652)=>{if(_0x353652[a12_0x43e2('0x1c')]){await Trigger_1[a12_0x43e2('0x24')]['deleteMany']({'guild':_0x201116[a12_0x43e2('0x1b')]['id']});return await _0x201116[a12_0x43e2('0x3')]['send']({'embed':{'color':tesseract_1[a12_0x43e2('0x2c')][a12_0x43e2('0x16')][a12_0x43e2('0x15')],'description':this[a12_0x43e2('0x26')][a12_0x43e2('0x25')][a12_0x43e2('0x10')](a12_0x43e2('0x1f'),a12_0x43e2('0x7'),'triggersClear',_0x201116[a12_0x43e2('0x2e')][a12_0x43e2('0x9')])}})['catch'](()=>{});}if(_0x353652[a12_0x43e2('0x8')]&&_0x353652[a12_0x43e2('0x8')][a12_0x43e2('0x28')]&&(_0x353652['_'][a12_0x43e2('0x28')]||_0x353652[a12_0x43e2('0x18')])){const _0x4d00e8=_0x353652[a12_0x43e2('0x8')][a12_0x43e2('0xa')]('\x20');const _0x33a192=[{'name':'Trigger','value':_0x4d00e8,'inline':!![]}];let _0x3be5be;if(_0x353652['_'][a12_0x43e2('0x28')]){_0x3be5be=_0x353652['_'][a12_0x43e2('0xa')]('\x20');_0x33a192[a12_0x43e2('0x2d')]({'name':a12_0x43e2('0x4'),'value':_0x3be5be});}let _0x2089dd;if(_0x353652[a12_0x43e2('0x18')]){const _0x1f662d=emojis[a12_0x43e2('0x11')](_0x353652[a12_0x43e2('0x18')]);if(_0x1f662d){_0x2089dd=_0x1f662d[a12_0x43e2('0x5')];_0x33a192['push']({'name':a12_0x43e2('0x6'),'value':_0x353652['reaction']});}}await Trigger_1[a12_0x43e2('0x24')][a12_0x43e2('0x1')]({'guild':_0x201116[a12_0x43e2('0x1b')]['id'],'trigger':_0x4d00e8,'responseMessage':_0x3be5be,'responseReaction':_0x2089dd});return await _0x201116[a12_0x43e2('0x3')][a12_0x43e2('0x1a')]({'embed':{'color':tesseract_1[a12_0x43e2('0x2c')][a12_0x43e2('0x16')][a12_0x43e2('0xc')],'description':this['client'][a12_0x43e2('0x25')][a12_0x43e2('0x10')]('en_us',a12_0x43e2('0x7'),a12_0x43e2('0x14'),_0x201116['author'][a12_0x43e2('0x9')]),'fields':_0x33a192}})[a12_0x43e2('0x23')](()=>{});}const _0x2f1405=await Trigger_1['default'][a12_0x43e2('0x2a')]({'guild':_0x201116[a12_0x43e2('0x1b')]['id']});return await _0x201116[a12_0x43e2('0x3')][a12_0x43e2('0x1a')]({'embed':{'color':tesseract_1[a12_0x43e2('0x2c')][a12_0x43e2('0x16')][a12_0x43e2('0x0')],'description':this[a12_0x43e2('0x26')][a12_0x43e2('0x25')][a12_0x43e2('0x10')](a12_0x43e2('0x1f'),a12_0x43e2('0x7'),a12_0x43e2('0x27')),'fields':_0x2f1405[a12_0x43e2('0xf')](_0x2a6045=>({'name':_0x2a6045[a12_0x43e2('0xd')],'value':(_0x2a6045['responseMessage']?a12_0x43e2('0x1d'):'')+'\x0a'+(_0x2a6045[a12_0x43e2('0x12')]?'Reaction\x20Response':'')}))}})[a12_0x43e2('0x23')](()=>{});};}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyaWdnZXJzLmpzIl0sIm5hbWVzIjpbInRlc3NlcmFjdF8xIiwicmVxdWlyZSIsImVtb2ppcyIsIlRyaWdnZXJfMSIsIm1vZHVsZSIsIk1lc3NhZ2VGaWx0ZXJDb21tYW5kIiwiY29uc3RydWN0b3IiLCJfMHgyMDExMTYiLCJfMHgzNTM2NTIiLCJfMHg0ZDAwZTgiLCJfMHgzM2ExOTIiLCJfMHgzYmU1YmUiLCJfMHgyMDg5ZGQiLCJfMHgxZjY2MmQiLCJfMHgyZjE0MDUiLCJfMHgyYTYwNDUiXSwibWFwcGluZ3MiOiJ1MUZBQUEsYUFLQSxNQUFNQSxXQUFBLENBQWNDLE9BQUEsQyxrQkFBQSxDQUFwQixDQUNBLE1BQU1DLE1BQUEsQ0FBU0QsT0FBQSxDLGtCQUFBLENBQWYsQ0FDQSxNQUFNRSxTQUFBLENBQVlGLE9BQUEsQyxpQkFBQSxDQUFsQixDQUNBRyxNQUFBLEMsa0JBQUEsRUFBaUIsTUFBTUMsb0JBQU4sU0FBbUNMLFdBQUEsQyxrQkFBQSxDQUFvQixDQUNwRU0sV0FBQSxFQUFjLENBQ1YsTSxrQkFBQSxDQUFrQixDLGFBQ2QsQywyWEFEYyxDLFVBRWQsQ0FBVSxFQUZJLEMsV0FHZCxDQUFXLEMsT0FDUCxDQUFPLEMsT0FDSCxDQUFPLEMsR0FBQSxDQURKLEMsU0FFSCxDQUFTLEMsR0FBQSxDQUZOLEMsVUFHSCxDQUFVLEMsR0FBQSxDQUhQLENBREEsQyxTQU1QLENBQVMsQyxrQkFBQSxDQU5GLEMsT0FPUCxDQUFPLEMsaUJBQUEsQ0FQQSxDLFFBUVAsQ0FBUSxDLGlCQUFBLEMsa0JBQUEsQ0FSRCxDQUhHLEMsT0FhZCxDLGtCQWJjLEMsT0FjZCxDLElBZGMsQyxRQWVkLEMsSUFmYyxDLFVBZ0JkLEMsR0FoQmMsQyxXQWlCZCxDLEdBakJjLEMsbUJBa0JkLENBQW1CLEVBbEJMLEMsaUJBbUJkLENBQWlCLEMsa0JBQUEsQ0FuQkgsQyxRQW9CZCxDQUFRLEMsVUFBQSxDLGtCQUFBLEMseURBQUEsQyxxQkFBQSxDQXBCTSxDQUFsQixFQTJCQSxLLE1B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QUFRYyxTQUFBLEMsaUJBQUEsRUFBYUMsU0FBQSxHQUFNLEMsTUFDdkIsQ0FBTUEsU0FBQSxDLGlCQUFBLENBRGlCLEMsT0FFdkIsQ0FBUSxDQUFBQSxTQUFBLEMsaUJBQUEsRSxrQkFBQSxDLEVBQUEsQ0FBRCxDLE1BQUEsQ0FBd0QsQ0FBQUEsU0FBQSxDLGtCQUFBLEUsc0JBQUEsQyxFQUFBLENBRnhDLENBQU4sQ0FBYixDQUhMLENBRHVCLENBQXJCLEUsa0JBQUEsRUFTSixJQUFNLEVBVEYsQ0FBYixDQXZEaUMsQ0FBckMsQ0E1QlUsQ0FEc0QsQ0FBeEUiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbi8qIVxuICogQGF1dGhvciBTYW5rYXJzYW4gS2FtcGEgKGszcm4zMXA0bmljKVxuICogQGNvcHlyaWdodCAyMDIwIC0gVGhlIEJhc3Rpb24gQm90IFByb2plY3RcbiAqL1xuY29uc3QgdGVzc2VyYWN0XzEgPSByZXF1aXJlKFwidGVzc2VyYWN0XCIpO1xuY29uc3QgZW1vamlzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2Vtb2ppc1wiKTtcbmNvbnN0IFRyaWdnZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvVHJpZ2dlclwiKTtcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgTWVzc2FnZUZpbHRlckNvbW1hbmQgZXh0ZW5kcyB0ZXNzZXJhY3RfMS5Db21tYW5kIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoXCJ0cmlnZ2Vyc1wiLCB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJdCBhbGxvd3MgeW91IHRvIGFkZCAoYW5kIHJlbW92ZSkgVHJpZ2dlcnMgaW4gdGhlIHNlcnZlci4gV2hlbiBhIHRyaWdnZXIgaXMgc2V0LCBhbmQgQmFzdGlvbiBzZWVzIGEgbWVzc2FnZSBmcm9tIGEgaHVtYW4gY29udGFpbmluZyB0aGUgcGF0dGVybiBzcGVjaWZpZWQgaW4gdGhlIHRyaWdnZXIsIGl0J2xsIHJlc3BvbmQgd2l0aCBlaXRoZXIgdGhlIHNwZWNpZmllZCByZXNwb25zZSBtZXNzYWdlIG9yIHJlYWN0aW9uLCBvciBib3RoLlwiLFxuICAgICAgICAgICAgdHJpZ2dlcnM6IFtdLFxuICAgICAgICAgICAgYXJndW1lbnRzOiB7XG4gICAgICAgICAgICAgICAgYWxpYXM6IHtcbiAgICAgICAgICAgICAgICAgICAgY2xlYXI6IFtcImNcIl0sXG4gICAgICAgICAgICAgICAgICAgIHBhdHRlcm46IFtcInBcIl0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0aW9uOiBbXCJlXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYm9vbGVhbjogW1wiY2xlYXJcIl0sXG4gICAgICAgICAgICAgICAgYXJyYXk6IFtcInBhdHRlcm5cIl0sXG4gICAgICAgICAgICAgICAgc3RyaW5nOiBbXCJwYXR0ZXJuXCIsIFwicmVhY3Rpb25cIl0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2NvcGU6IFwiZ3VpbGRcIixcbiAgICAgICAgICAgIG93bmVyOiB0cnVlLFxuICAgICAgICAgICAgdHlwaW5nOiB0cnVlLFxuICAgICAgICAgICAgY29vbGRvd246IDAsXG4gICAgICAgICAgICByYXRlbGltaXQ6IDEsXG4gICAgICAgICAgICBjbGllbnRQZXJtaXNzaW9uczogW10sXG4gICAgICAgICAgICB1c2VyUGVybWlzc2lvbnM6IFtcIk1BTkFHRV9HVUlMRFwiXSxcbiAgICAgICAgICAgIHN5bnRheDogW1xuICAgICAgICAgICAgICAgIFwidHJpZ2dlcnNcIixcbiAgICAgICAgICAgICAgICBcInRyaWdnZXJzIC0tcGF0dGVybiBQQVRURVJOIC0tIFJFU1BPTlNFXCIsXG4gICAgICAgICAgICAgICAgXCJ0cmlnZ2VycyAtLXBhdHRlcm4gUEFUVEVSTiAtLXJlYWN0aW9uIEVNT0pJXCIsXG4gICAgICAgICAgICAgICAgXCJ0cmlnZ2VycyAtLWNsZWFyXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leGVjID0gYXN5bmMgKG1lc3NhZ2UsIGFyZ3YpID0+IHtcbiAgICAgICAgICAgIGlmIChhcmd2LmNsZWFyKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgVHJpZ2dlcl8xLmRlZmF1bHQuZGVsZXRlTWFueSh7IGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBhd2FpdCBtZXNzYWdlLmNoYW5uZWwuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzc2VyYWN0XzEuQ29uc3RhbnRzLkNPTE9SUy5SRUQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jbGllbnQubG9jYWxlLmdldFN0cmluZyhcImVuX3VzXCIsIFwiaW5mb1wiLCBcInRyaWdnZXJzQ2xlYXJcIiwgbWVzc2FnZS5hdXRob3IudGFnKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYXJndi5wYXR0ZXJuICYmIGFyZ3YucGF0dGVybi5sZW5ndGggJiYgKGFyZ3YuXy5sZW5ndGggfHwgYXJndi5yZWFjdGlvbikpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXR0ZXJuID0gYXJndi5wYXR0ZXJuLmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJUcmlnZ2VyXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcGF0dGVybixcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBdO1xuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZTtcbiAgICAgICAgICAgICAgICBpZiAoYXJndi5fLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXNwb25zZSA9IGFyZ3YuXy5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJSZXNwb25zZSBNZXNzYWdlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBsZXQgcmVhY3Rpb247XG4gICAgICAgICAgICAgICAgaWYgKGFyZ3YucmVhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW1vamkgPSBlbW9qaXMucGFyc2VFbW9qaShhcmd2LnJlYWN0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVtb2ppKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWFjdGlvbiA9IGVtb2ppLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUmVzcG9uc2UgUmVhY3Rpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXJndi5yZWFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IFRyaWdnZXJfMS5kZWZhdWx0LmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgIGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkLFxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiBwYXR0ZXJuLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZU1lc3NhZ2U6IHJlc3BvbnNlLFxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZVJlYWN0aW9uOiByZWFjdGlvbixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgICAgICBlbWJlZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHRlc3NlcmFjdF8xLkNvbnN0YW50cy5DT0xPUlMuR1JFRU4sXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jbGllbnQubG9jYWxlLmdldFN0cmluZyhcImVuX3VzXCIsIFwiaW5mb1wiLCBcInRyaWdnZXJzQWRkXCIsIG1lc3NhZ2UuYXV0aG9yLnRhZyksXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgdHJpZ2dlcnMgPSBhd2FpdCBUcmlnZ2VyXzEuZGVmYXVsdC5maW5kKHsgZ3VpbGQ6IG1lc3NhZ2UuZ3VpbGQuaWQgfSk7XG4gICAgICAgICAgICByZXR1cm4gYXdhaXQgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0ZXNzZXJhY3RfMS5Db25zdGFudHMuQ09MT1JTLklSSVMsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJpbmZvXCIsIFwidHJpZ2dlcnNMaXN0XCIpLFxuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHRyaWdnZXJzLm1hcCh0ID0+ICh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiB0LnRyaWdnZXIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogKHQucmVzcG9uc2VNZXNzYWdlID8gXCJNZXNzYWdlIFJlc3BvbnNlXCIgOiBcIlwiKSArIFwiXFxuXCIgKyAodC5yZXNwb25zZVJlYWN0aW9uID8gXCJSZWFjdGlvbiBSZXNwb25zZVwiIDogXCJcIiksXG4gICAgICAgICAgICAgICAgICAgIH0pKSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgfVxufTsiXX0=