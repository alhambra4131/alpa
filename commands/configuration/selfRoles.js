const a29_0x4948=['resolveRole','MANAGE_ROLES','name','test','en_us','Self\x20Roles','catch','find','length','add','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','GREEN','client','guild','return\x20/\x22\x20+\x20this\x20+\x20\x22/','roles','Constants','remove','It\x20allows\x20you\x20to\x20set\x20up\x20Self\x20Roles\x20in\x20the\x20server.\x20Self\x20Roles\x20are\x20the\x20roles\x20which\x20server\x20members\x20can\x20assign\x20(and\x20unassign)\x20to\x20themselves.','selfRoles','default','compile','roleNotFound','RoleNotFound','join','apply','channel','constructor','Command','../../utils/errors','send','selfRoles\x20--remove\x20ROLE','getString','findByIdAndUpdate','author','selfRolesRemove','_id','locale','noSelfRoles','get','resolver','push','selfRolesAdd','selfRoles\x20--add\x20ROLE','has','errors','tag','exports','exec','cache','COLORS'];(function(_0x512ac5,_0x494820){const _0x243096=function(_0x58eb98){while(--_0x58eb98){_0x512ac5['push'](_0x512ac5['shift']());}};const _0x1bbc21=function(){const _0x5a9618={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x2a1295,_0x13eaad,_0x4633db,_0x4a15a7){_0x4a15a7=_0x4a15a7||{};let _0x440f8c=_0x13eaad+'='+_0x4633db;let _0x552078=0x0;for(let _0x2174c9=0x0,_0x143611=_0x2a1295['length'];_0x2174c9<_0x143611;_0x2174c9++){const _0x571784=_0x2a1295[_0x2174c9];_0x440f8c+=';\x20'+_0x571784;const _0x3031ef=_0x2a1295[_0x571784];_0x2a1295['push'](_0x3031ef);_0x143611=_0x2a1295['length'];if(_0x3031ef!==!![]){_0x440f8c+='='+_0x3031ef;}}_0x4a15a7['cookie']=_0x440f8c;},'removeCookie':function(){return'dev';},'getCookie':function(_0x577543,_0x22b35a){_0x577543=_0x577543||function(_0x27cb0f){return _0x27cb0f;};const _0x2cbd4f=_0x577543(new RegExp('(?:^|;\x20)'+_0x22b35a['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x59937b=function(_0x144361,_0x6411ba){_0x144361(++_0x6411ba);};_0x59937b(_0x243096,_0x494820);return _0x2cbd4f?decodeURIComponent(_0x2cbd4f[0x1]):undefined;}};const _0x37ef40=function(){const _0x3502d0=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x3502d0['test'](_0x5a9618['removeCookie']['toString']());};_0x5a9618['updateCookie']=_0x37ef40;let _0x3f349d='';const _0x253598=_0x5a9618['updateCookie']();if(!_0x253598){_0x5a9618['setCookie'](['*'],'counter',0x1);}else if(_0x253598){_0x3f349d=_0x5a9618['getCookie'](null,'counter');}else{_0x5a9618['removeCookie']();}};_0x1bbc21();}(a29_0x4948,0x1b9));const a29_0x2430=function(_0x512ac5,_0x494820){_0x512ac5=_0x512ac5-0x0;let _0x243096=a29_0x4948[_0x512ac5];return _0x243096;};const a29_0x5a9618=function(){let _0x1f3bce=!![];return function(_0x5c2c77,_0x8ade45){const _0x2b0632=_0x1f3bce?function(){if(_0x8ade45){const _0x16fd6e=_0x8ade45[a29_0x2430('0x2b')](_0x5c2c77,arguments);_0x8ade45=null;return _0x16fd6e;}}:function(){};_0x1f3bce=![];return _0x2b0632;};}();const a29_0x58eb98=a29_0x5a9618(this,function(){const _0x734185=function(){const _0x131b5b=_0x734185[a29_0x2430('0x2d')](a29_0x2430('0x20'))()[a29_0x2430('0x27')](a29_0x2430('0x1c'));return!_0x131b5b[a29_0x2430('0x15')](a29_0x58eb98);};return _0x734185();});a29_0x58eb98();'use strict';const tesseract_1=require('tesseract');const errors=require(a29_0x2430('0x2f'));const Role_1=require('../../models/Role');module[a29_0x2430('0xe')]=class SelfRoles extends tesseract_1[a29_0x2430('0x2e')]{constructor(){super('selfRoles',{'description':a29_0x2430('0x24'),'triggers':[],'arguments':{'alias':{'add':['a'],'remove':['r']},'array':['add',a29_0x2430('0x23')],'string':[a29_0x2430('0x1b'),'remove']},'scope':a29_0x2430('0x1f'),'owner':![],'typing':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[a29_0x2430('0x13')],'userPermissions':[a29_0x2430('0x13')],'syntax':[a29_0x2430('0x25'),a29_0x2430('0xa'),a29_0x2430('0x31')]});this[a29_0x2430('0xf')]=async(_0x3b6b43,_0x1b2840)=>{if(_0x1b2840[a29_0x2430('0x1b')]){const _0x2aa718=await Role_1[a29_0x2430('0x26')]['countDocuments']({'guild':_0x3b6b43[a29_0x2430('0x1f')]['id'],'selfAssignable':!![]});if(_0x2aa718>=this['MAX_SELF_ROLES']){throw new Error(this[a29_0x2430('0x1e')][a29_0x2430('0x4')][a29_0x2430('0x32')]('en_us','errors','selfRolesLimit',this['MAX_SELF_ROLES']));}const _0x19d408=this[a29_0x2430('0x1e')][a29_0x2430('0x7')][a29_0x2430('0x12')](_0x3b6b43[a29_0x2430('0x1f')],_0x1b2840['add'][a29_0x2430('0x2a')]('\x20'));if(!_0x19d408)throw new errors[(a29_0x2430('0x29'))](this[a29_0x2430('0x1e')][a29_0x2430('0x4')][a29_0x2430('0x32')](a29_0x2430('0x16'),a29_0x2430('0xc'),'roleNotFound'));await Role_1[a29_0x2430('0x26')][a29_0x2430('0x0')](_0x19d408['id'],{'_id':_0x19d408['id'],'guild':_0x3b6b43['guild']['id'],'selfAssignable':!![]},{'upsert':!![]});await _0x3b6b43[a29_0x2430('0x2c')][a29_0x2430('0x30')]({'embed':{'color':tesseract_1['Constants'][a29_0x2430('0x11')][a29_0x2430('0x1d')],'description':this['client'][a29_0x2430('0x4')][a29_0x2430('0x32')](a29_0x2430('0x16'),'info',a29_0x2430('0x9'),_0x3b6b43[a29_0x2430('0x1')][a29_0x2430('0xd')],_0x19d408[a29_0x2430('0x14')]),'footer':{'text':_0x19d408['id']}}})[a29_0x2430('0x18')](()=>{});}else if(_0x1b2840[a29_0x2430('0x23')]){const _0x2e9683=this[a29_0x2430('0x1e')][a29_0x2430('0x7')][a29_0x2430('0x12')](_0x3b6b43[a29_0x2430('0x1f')],_0x1b2840[a29_0x2430('0x23')]['join']('\x20'));if(!_0x2e9683)throw new errors[(a29_0x2430('0x29'))](this[a29_0x2430('0x1e')]['locale'][a29_0x2430('0x32')](a29_0x2430('0x16'),'errors',a29_0x2430('0x28')));await Role_1['default'][a29_0x2430('0x0')](_0x2e9683['id'],{'$unset':{'selfAssignable':0x1}});await _0x3b6b43[a29_0x2430('0x2c')]['send']({'embed':{'color':tesseract_1[a29_0x2430('0x22')][a29_0x2430('0x11')]['RED'],'description':this['client'][a29_0x2430('0x4')][a29_0x2430('0x32')](a29_0x2430('0x16'),'info',a29_0x2430('0x2'),_0x3b6b43[a29_0x2430('0x1')]['tag'],_0x2e9683[a29_0x2430('0x14')]),'footer':{'text':_0x2e9683['id']}}})[a29_0x2430('0x18')](()=>{});}else{const _0x1356f9=await Role_1[a29_0x2430('0x26')][a29_0x2430('0x19')]({'guild':_0x3b6b43[a29_0x2430('0x1f')]['id'],'selfAssignable':!![]});if(!_0x1356f9[a29_0x2430('0x1a')]){throw new Error(this[a29_0x2430('0x1e')][a29_0x2430('0x4')][a29_0x2430('0x32')](a29_0x2430('0x16'),'errors',a29_0x2430('0x5')));}const _0x27cdcb=[];for(const _0x3a9bc5 of _0x1356f9){if(!_0x3b6b43[a29_0x2430('0x1f')][a29_0x2430('0x21')][a29_0x2430('0x10')][a29_0x2430('0xb')](_0x3a9bc5[a29_0x2430('0x3')])){await _0x3a9bc5['remove']()[a29_0x2430('0x18')](()=>{});}_0x27cdcb[a29_0x2430('0x8')]({'name':_0x3b6b43[a29_0x2430('0x1f')][a29_0x2430('0x21')][a29_0x2430('0x10')][a29_0x2430('0x6')](_0x3a9bc5[a29_0x2430('0x3')])[a29_0x2430('0x14')]||'-','value':_0x3a9bc5[a29_0x2430('0x3')]});}await _0x3b6b43['channel'][a29_0x2430('0x30')]({'embed':{'color':tesseract_1['Constants'][a29_0x2430('0x11')]['IRIS'],'title':a29_0x2430('0x17'),'description':this[a29_0x2430('0x1e')][a29_0x2430('0x4')][a29_0x2430('0x32')](a29_0x2430('0x16'),'info','selfRolesList'),'fields':_0x27cdcb}})[a29_0x2430('0x18')](()=>{});}};this['MAX_SELF_ROLES']=0xa;}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlbGZSb2xlcy5qcyJdLCJuYW1lcyI6WyJ0ZXNzZXJhY3RfMSIsInJlcXVpcmUiLCJlcnJvcnMiLCJSb2xlXzEiLCJtb2R1bGUiLCJTZWxmUm9sZXMiLCJjb25zdHJ1Y3RvciIsIl8weDNiNmI0MyIsIl8weDFiMjg0MCIsIl8weDJhYTcxOCIsIkVycm9yIiwiXzB4MTlkNDA4IiwiXzB4MmU5NjgzIiwiXzB4MTM1NmY5IiwiXzB4MjdjZGNiIiwiXzB4M2E5YmM1Il0sIm1hcHBpbmdzIjoiNmpHQUFBLGFBS0EsTUFBTUEsV0FBQSxDQUFjQyxPQUFBLEMsV0FBQSxDQUFwQixDQUNBLE1BQU1DLE1BQUEsQ0FBU0QsT0FBQSxDLGtCQUFBLENBQWYsQ0FDQSxNQUFNRSxNQUFBLENBQVNGLE9BQUEsQyxtQkFBQSxDQUFmLENBQ0FHLE1BQUEsQyxpQkFBQSxFQUFpQixNQUFNQyxTQUFOLFNBQXdCTCxXQUFBLEMsa0JBQUEsQ0FBb0IsQ0FDekRNLFdBQUEsRUFBYyxDQUNWLE0sV0FBQSxDQUFtQixDLGFBQ2YsQyxrQkFEZSxDLFVBRWYsQ0FBVSxFQUZLLEMsV0FHZixDQUFXLEMsT0FDUCxDQUFPLEMsS0FDSCxDQUFLLEMsR0FBQSxDQURGLEMsUUFFSCxDQUFRLEMsR0FBQSxDQUZMLENBREEsQyxPQUtQLENBQU8sQyxLQUFBLEMsa0JBQUEsQ0FMQSxDLFFBTVAsQ0FBUSxDLGtCQUFBLEMsUUFBQSxDQU5ELENBSEksQyxPQVdmLEMsa0JBWGUsQyxPQVlmLEMsR0FaZSxDLFFBYWYsQyxJQWJlLEMsVUFjZixDLEdBZGUsQyxXQWVmLEMsR0FmZSxDLG1CQWdCZixDQUFtQixDLGtCQUFBLENBaEJKLEMsaUJBaUJmLENBQWlCLEMsa0JBQUEsQ0FqQkYsQyxRQWtCZixDQUFRLEMsa0JBQUEsQyxpQkFBQSxDLGtCQUFBLENBbEJPLENBQW5CLEVBd0JBLEssaUJBQUEsRUFBWSxNQUFPQyxTQUFQLENBQWdCQyxTQUFoQixHQUF5QixDQUNqQyxHQUFJQSxTQUFBLEMsa0JBQUEsQ0FB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cGEgKGszcm4zMXA0bmljKVxuICogQGNvcHlyaWdodCAyMDIwIC0gVGhlIEJhc3Rpb24gQm90IFByb2plY3RcbiAqL1xuY29uc3QgdGVzc2VyYWN0XzEgPSByZXF1aXJlKFwidGVzc2VyYWN0XCIpO1xuY29uc3QgZXJyb3JzID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2Vycm9yc1wiKTtcbmNvbnN0IFJvbGVfMSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvUm9sZVwiKTtcbm1vZHVsZS5leHBvcnRzID0gY2xhc3MgU2VsZlJvbGVzIGV4dGVuZHMgdGVzc2VyYWN0XzEuQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwic2VsZlJvbGVzXCIsIHtcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIkl0IGFsbG93cyB5b3UgdG8gc2V0IHVwIFNlbGYgUm9sZXMgaW4gdGhlIHNlcnZlci4gU2VsZiBSb2xlcyBhcmUgdGhlIHJvbGVzIHdoaWNoIHNlcnZlciBtZW1iZXJzIGNhbiBhc3NpZ24gKGFuZCB1bmFzc2lnbikgdG8gdGhlbXNlbHZlcy5cIixcbiAgICAgICAgICAgIHRyaWdnZXJzOiBbXSxcbiAgICAgICAgICAgIGFyZ3VtZW50czoge1xuICAgICAgICAgICAgICAgIGFsaWFzOiB7XG4gICAgICAgICAgICAgICAgICAgIGFkZDogW1wiYVwiXSxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiBbXCJyXCJdLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgYXJyYXk6IFtcImFkZFwiLCBcInJlbW92ZVwiXSxcbiAgICAgICAgICAgICAgICBzdHJpbmc6IFtcImFkZFwiLCBcInJlbW92ZVwiXSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzY29wZTogXCJndWlsZFwiLFxuICAgICAgICAgICAgb3duZXI6IGZhbHNlLFxuICAgICAgICAgICAgdHlwaW5nOiB0cnVlLFxuICAgICAgICAgICAgY29vbGRvd246IDAsXG4gICAgICAgICAgICByYXRlbGltaXQ6IDEsXG4gICAgICAgICAgICBjbGllbnRQZXJtaXNzaW9uczogW1wiTUFOQUdFX1JPTEVTXCJdLFxuICAgICAgICAgICAgdXNlclBlcm1pc3Npb25zOiBbXCJNQU5BR0VfUk9MRVNcIl0sXG4gICAgICAgICAgICBzeW50YXg6IFtcbiAgICAgICAgICAgICAgICBcInNlbGZSb2xlc1wiLFxuICAgICAgICAgICAgICAgIFwic2VsZlJvbGVzIC0tYWRkIFJPTEVcIixcbiAgICAgICAgICAgICAgICBcInNlbGZSb2xlcyAtLXJlbW92ZSBST0xFXCIsXG4gICAgICAgICAgICBdLFxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5leGVjID0gYXN5bmMgKG1lc3NhZ2UsIGFyZ3YpID0+IHtcbiAgICAgICAgICAgIGlmIChhcmd2LmFkZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gYXdhaXQgUm9sZV8xLmRlZmF1bHQuY291bnREb2N1bWVudHMoe1xuICAgICAgICAgICAgICAgICAgICBndWlsZDogbWVzc2FnZS5ndWlsZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZkFzc2lnbmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID49IHRoaXMuTUFYX1NFTEZfUk9MRVMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKHRoaXMuY2xpZW50LmxvY2FsZS5nZXRTdHJpbmcoXCJlbl91c1wiLCBcImVycm9yc1wiLCBcInNlbGZSb2xlc0xpbWl0XCIsIHRoaXMuTUFYX1NFTEZfUk9MRVMpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHRoaXMuY2xpZW50LnJlc29sdmVyLnJlc29sdmVSb2xlKG1lc3NhZ2UuZ3VpbGQsIGFyZ3YuYWRkLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvbGUpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuUm9sZU5vdEZvdW5kKHRoaXMuY2xpZW50LmxvY2FsZS5nZXRTdHJpbmcoXCJlbl91c1wiLCBcImVycm9yc1wiLCBcInJvbGVOb3RGb3VuZFwiKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUm9sZV8xLmRlZmF1bHQuZmluZEJ5SWRBbmRVcGRhdGUocm9sZS5pZCwge1xuICAgICAgICAgICAgICAgICAgICBfaWQ6IHJvbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgIGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkLFxuICAgICAgICAgICAgICAgICAgICBzZWxmQXNzaWduYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9LCB7XG4gICAgICAgICAgICAgICAgICAgIHVwc2VydDogdHJ1ZSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBhd2FpdCBtZXNzYWdlLmNoYW5uZWwuc2VuZCh7XG4gICAgICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogdGVzc2VyYWN0XzEuQ29uc3RhbnRzLkNPTE9SUy5HUkVFTixcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJpbmZvXCIsIFwic2VsZlJvbGVzQWRkXCIsIG1lc3NhZ2UuYXV0aG9yLnRhZywgcm9sZS5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Rlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJvbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGFyZ3YucmVtb3ZlKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IHRoaXMuY2xpZW50LnJlc29sdmVyLnJlc29sdmVSb2xlKG1lc3NhZ2UuZ3VpbGQsIGFyZ3YucmVtb3ZlLmpvaW4oXCIgXCIpKTtcbiAgICAgICAgICAgICAgICBpZiAoIXJvbGUpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBlcnJvcnMuUm9sZU5vdEZvdW5kKHRoaXMuY2xpZW50LmxvY2FsZS5nZXRTdHJpbmcoXCJlbl91c1wiLCBcImVycm9yc1wiLCBcInJvbGVOb3RGb3VuZFwiKSk7XG4gICAgICAgICAgICAgICAgYXdhaXQgUm9sZV8xLmRlZmF1bHQuZmluZEJ5SWRBbmRVcGRhdGUocm9sZS5pZCwge1xuICAgICAgICAgICAgICAgICAgICAkdW5zZXQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGZBc3NpZ25hYmxlOiAxLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZW1iZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0ZXNzZXJhY3RfMS5Db25zdGFudHMuQ09MT1JTLlJFRCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJpbmZvXCIsIFwic2VsZlJvbGVzUmVtb3ZlXCIsIG1lc3NhZ2UuYXV0aG9yLnRhZywgcm9sZS5uYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvb3Rlcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHJvbGUuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHNlbGZSb2xlcyA9IGF3YWl0IFJvbGVfMS5kZWZhdWx0LmZpbmQoe1xuICAgICAgICAgICAgICAgICAgICBndWlsZDogbWVzc2FnZS5ndWlsZC5pZCxcbiAgICAgICAgICAgICAgICAgICAgc2VsZkFzc2lnbmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgaWYgKCFzZWxmUm9sZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJlcnJvcnNcIiwgXCJub1NlbGZSb2xlc1wiKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGZpZWxkcyA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3Qgcm9sZSBvZiBzZWxmUm9sZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlLmd1aWxkLnJvbGVzLmNhY2hlLmhhcyhyb2xlLl9pZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvbGUucmVtb3ZlKCkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbWVzc2FnZS5ndWlsZC5yb2xlcy5jYWNoZS5nZXQocm9sZS5faWQpLm5hbWUgfHwgXCItXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcm9sZS5faWRcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGF3YWl0IG1lc3NhZ2UuY2hhbm5lbC5zZW5kKHtcbiAgICAgICAgICAgICAgICAgICAgZW1iZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiB0ZXNzZXJhY3RfMS5Db25zdGFudHMuQ09MT1JTLklSSVMsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJTZWxmIFJvbGVzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jbGllbnQubG9jYWxlLmdldFN0cmluZyhcImVuX3VzXCIsIFwiaW5mb1wiLCBcInNlbGZSb2xlc0xpc3RcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWVsZHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLk1BWF9TRUxGX1JPTEVTID0gMTA7XG4gICAgfVxufTsiXX0=