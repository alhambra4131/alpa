const a86_0x562e=['resolver','round','tag','member','level','document','memberNotFound','tesseract','location','guild','locale','Experience','author.discord.id','gamification','test','findOne','karma','default','cakeDay','Constants','getString','user','^([^\x20]+(\x20+[^\x20]+)+)+[^\x20]}','channel','Bastion\x20Profile','../../utils/gamification','\x20-\x20','profile','It\x20allows\x20you\x20to\x20see\x20your\x20(or\x20any\x20of\x20the\x20server\x20member\x27s)\x20Bastion\x20Profile.','IRIS','profileNotFound','../../utils/progress','en_us','Command','currentLevel','countDocuments','apply','toString','Karma','Location','\x20/\x20','send','author','experience','compile','resolveGuildMember','return\x20/\x22\x20+\x20this\x20+\x20\x22/','toUTCString','computeExperience','Progress\x20-\x20','multiplier','balance','client','avatar','nextLevel','Rank','length','catch','Cake\x20Day'];(function(_0x50b068,_0x562e67){const _0x291fe9=function(_0x427c2a){while(--_0x427c2a){_0x50b068['push'](_0x50b068['shift']());}};const _0x303418=function(){const _0x549c20={'data':{'key':'cookie','value':'timeout'},'setCookie':function(_0x1bba7d,_0x8aad23,_0x3d75d3,_0xcfa976){_0xcfa976=_0xcfa976||{};let _0x5af9b0=_0x8aad23+'='+_0x3d75d3;let _0x5b8ef9=0x0;for(let _0x1aa255=0x0,_0x15374e=_0x1bba7d['length'];_0x1aa255<_0x15374e;_0x1aa255++){const _0x59ce01=_0x1bba7d[_0x1aa255];_0x5af9b0+=';\x20'+_0x59ce01;const _0x1719da=_0x1bba7d[_0x59ce01];_0x1bba7d['push'](_0x1719da);_0x15374e=_0x1bba7d['length'];if(_0x1719da!==!![]){_0x5af9b0+='='+_0x1719da;}}_0xcfa976['cookie']=_0x5af9b0;},'removeCookie':function(){return'dev';},'getCookie':function(_0x547b07,_0x3e6e2d){_0x547b07=_0x547b07||function(_0x47b008){return _0x47b008;};const _0x1d61a5=_0x547b07(new RegExp('(?:^|;\x20)'+_0x3e6e2d['replace'](/([.$?*|{}()[]\/+^])/g,'$1')+'=([^;]*)'));const _0x23c567=function(_0x53be42,_0x187b3a){_0x53be42(++_0x187b3a);};_0x23c567(_0x291fe9,_0x562e67);return _0x1d61a5?decodeURIComponent(_0x1d61a5[0x1]):undefined;}};const _0x44fe57=function(){const _0x573b4a=new RegExp('\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*[\x27|\x22].+[\x27|\x22];?\x20*}');return _0x573b4a['test'](_0x549c20['removeCookie']['toString']());};_0x549c20['updateCookie']=_0x44fe57;let _0x5e3d67='';const _0x30f778=_0x549c20['updateCookie']();if(!_0x30f778){_0x549c20['setCookie'](['*'],'counter',0x1);}else if(_0x30f778){_0x5e3d67=_0x549c20['getCookie'](null,'counter');}else{_0x549c20['removeCookie']();}};_0x303418();}(a86_0x562e,0x1b7));const a86_0x291f=function(_0x50b068,_0x562e67){_0x50b068=_0x50b068-0x0;let _0x291fe9=a86_0x562e[_0x50b068];return _0x291fe9;};const a86_0x549c20=function(){let _0x3d152b=!![];return function(_0x2f9951,_0xaf173e){const _0xc5105b=_0x3d152b?function(){if(_0xaf173e){const _0x3fbb99=_0xaf173e[a86_0x291f('0xa')](_0x2f9951,arguments);_0xaf173e=null;return _0x3fbb99;}}:function(){};_0x3d152b=![];return _0xc5105b;};}();const a86_0x427c2a=a86_0x549c20(this,function(){const _0xea4880=function(){const _0x171609=_0xea4880['constructor'](a86_0x291f('0x14'))()[a86_0x291f('0x12')](a86_0x291f('0x37'));return!_0x171609[a86_0x291f('0x2f')](a86_0x427c2a);};return _0xea4880();});a86_0x427c2a();'use strict';const tesseract_1=require(a86_0x291f('0x28'));const Member_1=require('../../models/Member');const User_1=require('../../models/User');const gamification=require(a86_0x291f('0x3a'));const progress_1=require(a86_0x291f('0x5'));module['exports']=class ProfileCommand extends tesseract_1[a86_0x291f('0x7')]{constructor(){super('profile',{'description':a86_0x291f('0x2'),'triggers':[],'arguments':{},'scope':a86_0x291f('0x2a'),'owner':![],'typing':!![],'cooldown':0x0,'ratelimit':0x1,'clientPermissions':[],'userPermissions':[],'syntax':[a86_0x291f('0x1'),'profile\x20USER']});this['exec']=async(_0x50071f,_0x4851ca)=>{const _0x106161=_0x4851ca['_'][a86_0x291f('0x1e')]?_0x4851ca['_'][0x0]:_0x50071f['author']['id'];const _0x51a525=_0x106161===_0x50071f[a86_0x291f('0x10')]['id']?_0x50071f[a86_0x291f('0x24')]:this[a86_0x291f('0x1a')][a86_0x291f('0x21')][a86_0x291f('0x13')](_0x50071f[a86_0x291f('0x2a')],_0x106161);if(!_0x51a525)throw new Error(this['client']['locale'][a86_0x291f('0x35')]('en_us','errors',a86_0x291f('0x27')));const _0x5a8e23=_0x106161===_0x50071f[a86_0x291f('0x10')]['id']?_0x50071f[a86_0x291f('0x10')][a86_0x291f('0x26')]:await User_1[a86_0x291f('0x32')]['findById'](_0x106161);const _0x4ed32a=_0x106161===_0x50071f[a86_0x291f('0x10')]['id']?_0x51a525[a86_0x291f('0x26')]:await Member_1[a86_0x291f('0x32')][a86_0x291f('0x30')]({'user':_0x106161,'guild':_0x50071f[a86_0x291f('0x2a')]['id']});if(!_0x5a8e23||!_0x4ed32a)throw new Error(this[a86_0x291f('0x1a')]['locale']['getString'](a86_0x291f('0x6'),'errors',a86_0x291f('0x4')));const _0x246bed=await Member_1[a86_0x291f('0x32')]['find']({'guild':_0x50071f[a86_0x291f('0x2a')]['id']},null,{'sort':{'level':-0x1,'experience':-0x1,'karma':-0x1,'balance':-0x1}})[a86_0x291f('0x9')]({'$or':[{'level':{'$gt':_0x4ed32a[a86_0x291f('0x25')]}},{'level':_0x4ed32a[a86_0x291f('0x25')],'experience':{'$gt':_0x4ed32a[a86_0x291f('0x11')]}},{'level':_0x4ed32a['level'],'experience':_0x4ed32a[a86_0x291f('0x11')],'karma':{'$gt':_0x4ed32a['karma']}},{'level':_0x4ed32a['level'],'experience':_0x4ed32a['experience'],'karma':_0x4ed32a['karma'],'balance':{'$gt':_0x4ed32a['balance']}}]});const _0x31e8cd={'currentLevel':gamification['computeExperience'](_0x4ed32a[a86_0x291f('0x25')],_0x50071f[a86_0x291f('0x2a')][a86_0x291f('0x26')][a86_0x291f('0x2e')][a86_0x291f('0x18')]),'nextLevel':gamification[a86_0x291f('0x16')](_0x4ed32a[a86_0x291f('0x25')]+0x1,_0x50071f['guild']['document'][a86_0x291f('0x2e')][a86_0x291f('0x18')])};const _0x4cdd55={'currentLevel':_0x4ed32a[a86_0x291f('0x11')]-_0x31e8cd[a86_0x291f('0x8')],'nextLevel':_0x31e8cd['nextLevel']-_0x31e8cd[a86_0x291f('0x8')]};const _0x16ac26=_0x4cdd55['currentLevel']/_0x4cdd55[a86_0x291f('0x1c')]*0x64;_0x50071f[a86_0x291f('0x38')][a86_0x291f('0xf')]({'embed':{'color':_0x5a8e23['color']||tesseract_1[a86_0x291f('0x34')]['COLORS'][a86_0x291f('0x3')],'author':{'name':_0x51a525[a86_0x291f('0x36')][a86_0x291f('0x23')]},'title':a86_0x291f('0x39'),'description':_0x5a8e23['info'],'fields':[{'name':a86_0x291f('0x1d'),'value':(_0x246bed+0x1)[a86_0x291f('0xb')](),'inline':!![]},{'name':'Level','value':_0x4ed32a[a86_0x291f('0x25')][a86_0x291f('0xb')](),'inline':!![]},{'name':a86_0x291f('0x2c'),'value':_0x4ed32a[a86_0x291f('0x11')]['toString'](),'inline':!![]},{'name':a86_0x291f('0xc'),'value':_0x4ed32a[a86_0x291f('0x31')][a86_0x291f('0xb')](),'inline':!![]},{'name':'Bastion\x20Coins','value':_0x4ed32a[a86_0x291f('0x19')][a86_0x291f('0xb')](),'inline':!![]},{'name':a86_0x291f('0x17')+_0x4cdd55['currentLevel']+a86_0x291f('0xe')+_0x4cdd55[a86_0x291f('0x1c')]+a86_0x291f('0x0')+Math[a86_0x291f('0x22')](_0x16ac26)+'%','value':'`'+progress_1['default'](_0x16ac26,0x23)+'`'},{'name':a86_0x291f('0x20'),'value':_0x5a8e23[a86_0x291f('0x33')]?_0x5a8e23['cakeDay'][a86_0x291f('0x15')]():'-','inline':!![]},{'name':a86_0x291f('0xd'),'value':_0x5a8e23[a86_0x291f('0x29')]||'-','inline':!![]}],'thumbnail':{'url':_0x5a8e23[a86_0x291f('0x1b')]||_0x51a525[a86_0x291f('0x36')]['displayAvatarURL']({'dynamic':!![],'size':0x200})},'footer':{'text':_0x51a525['id']===this[a86_0x291f('0x1a')][a86_0x291f('0x2b')]['getConstant'](a86_0x291f('0x2d'))?'Oh,\x20hey!\x20Here\x27s\x20my\x20developer!':''}}})[a86_0x291f('0x1f')](()=>{});};}};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2ZpbGUuanMiXSwibmFtZXMiOlsidGVzc2VyYWN0XzEiLCJyZXF1aXJlIiwiTWVtYmVyXzEiLCJVc2VyXzEiLCJnYW1pZmljYXRpb24iLCJwcm9ncmVzc18xIiwibW9kdWxlIiwiUHJvZmlsZUNvbW1hbmQiLCJjb25zdHJ1Y3RvciIsIl8weDUwMDcxZiIsIl8weDQ4NTFjYSIsIl8weDEwNjE2MSIsIl8weDUxYTUyNSIsIkVycm9yIiwiXzB4NWE4ZTIzIiwiXzB4NGVkMzJhIiwiXzB4MjQ2YmVkIiwiXzB4MzFlOGNkIiwiXzB4NGNkZDU1IiwiXzB4MTZhYzI2IiwiTWF0aCJdLCJtYXBwaW5ncyI6ImltR0FBQSxhQUtBLE1BQU1BLFdBQUEsQ0FBY0MsT0FBQSxDLGtCQUFBLENBQXBCLENBQ0EsTUFBTUMsUUFBQSxDQUFXRCxPQUFBLEMscUJBQUEsQ0FBakIsQ0FDQSxNQUFNRSxNQUFBLENBQVNGLE9BQUEsQyxtQkFBQSxDQUFmLENBQ0EsTUFBTUcsWUFBQSxDQUFlSCxPQUFBLEMsa0JBQUEsQ0FBckIsQ0FDQSxNQUFNSSxVQUFBLENBQWFKLE9BQUEsQyxpQkFBQSxDQUFuQixDQUNBSyxNQUFBLEMsU0FBQSxFQUFpQixNQUFNQyxjQUFOLFNBQTZCUCxXQUFBLEMsaUJBQUEsQ0FBb0IsQ0FDOURRLFdBQUEsRUFBYyxDQUNWLE0sU0FBQSxDQUFpQixDLGFBQ2IsQyxpQkFEYSxDLFVBRWIsQ0FBVSxFQUZHLEMsV0FHYixDQUFXLEVBSEUsQyxPQUliLEMsa0JBSmEsQyxPQUtiLEMsR0FMYSxDLFFBTWIsQyxJQU5hLEMsVUFPYixDLEdBUGEsQyxXQVFiLEMsR0FSYSxDLG1CQVNiLENBQW1CLEVBVE4sQyxpQkFVYixDQUFpQixFQVZKLEMsUUFXYixDQUFRLEMsaUJBQUEsQyxpQkFBQSxDQVhLLENBQWpCLEVBZ0JBLEssTUFBQSxFQUFZLE1BQU9DLFNBQVAsQ0FBZ0JDLFNBQWhCLEdBQXlCLENBQ2pDLE1BQU1DLFNBQUEsQ0FBYUQsU0FBQSxDLEdBQUEsRSxrQkFB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YyxTQUFuQixDLElBQUEsQ0FBTixDLEdBRlgsQ0ExQkksQ0E4QkosQyxNQUNJLEMsa0JBREosQyxPQUVJLENBQU9MLFNBQUEsQyxrQkFBQSxFQUFzQkEsU0FBQSxDLFNBQUEsRSxrQkFBQSxHQUF0QixDLEdBRlgsQyxRQUdJLEMsSUFISixDQTlCSSxDQW1DSixDLE1BQ0ksQyxpQkFESixDLE9BRUksQ0FBT0EsU0FBQSxDLGtCQUFBLEcsR0FGWCxDLFFBR0ksQyxJQUhKLENBbkNJLENBUEwsQyxXQWdESCxDQUFXLEMsS0FDUCxDQUFLQSxTQUFBLEMsa0JBQUEsR0FBc0JGLFNBQUEsQyxrQkFBQSxFLGtCQUFBLEVBQTZCLEMsU0FDcEQsQyxJQURvRCxDLE1BRXBELEMsS0FGb0QsQ0FBN0IsQ0FEcEIsQ0FoRFIsQyxRQXNESCxDQUFRLEMsTUFDSixDQUFNQSxTQUFBLEMsSUFBQSxJQUFjLEssa0JBQUEsRSxrQkFBQSxFLGFBQUEsRSxrQkFBQSxDQUFkLEMsOENBQUEsQyxFQURGLENBdERMLENBRFUsQ0FBckIsRSxrQkFBQSxFQTJEUyxJQUFNLEVBM0RmLEVBN0NpQyxDQUFyQyxDQWpCVSxDQURnRCxDQUFsRSIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuLyohXG4gKiBAYXV0aG9yIFNhbmthcnNhbiBLYW1wYSAoazNybjMxcDRuaWMpXG4gKiBAY29weXJpZ2h0IDIwMjAgLSBUaGUgQmFzdGlvbiBCb3QgUHJvamVjdFxuICovXG5jb25zdCB0ZXNzZXJhY3RfMSA9IHJlcXVpcmUoXCJ0ZXNzZXJhY3RcIik7XG5jb25zdCBNZW1iZXJfMSA9IHJlcXVpcmUoXCIuLi8uLi9tb2RlbHMvTWVtYmVyXCIpO1xuY29uc3QgVXNlcl8xID0gcmVxdWlyZShcIi4uLy4uL21vZGVscy9Vc2VyXCIpO1xuY29uc3QgZ2FtaWZpY2F0aW9uID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL2dhbWlmaWNhdGlvblwiKTtcbmNvbnN0IHByb2dyZXNzXzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvcHJvZ3Jlc3NcIik7XG5tb2R1bGUuZXhwb3J0cyA9IGNsYXNzIFByb2ZpbGVDb21tYW5kIGV4dGVuZHMgdGVzc2VyYWN0XzEuQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKFwicHJvZmlsZVwiLCB7XG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJJdCBhbGxvd3MgeW91IHRvIHNlZSB5b3VyIChvciBhbnkgb2YgdGhlIHNlcnZlciBtZW1iZXIncykgQmFzdGlvbiBQcm9maWxlLlwiLFxuICAgICAgICAgICAgdHJpZ2dlcnM6IFtdLFxuICAgICAgICAgICAgYXJndW1lbnRzOiB7fSxcbiAgICAgICAgICAgIHNjb3BlOiBcImd1aWxkXCIsXG4gICAgICAgICAgICBvd25lcjogZmFsc2UsXG4gICAgICAgICAgICB0eXBpbmc6IHRydWUsXG4gICAgICAgICAgICBjb29sZG93bjogMCxcbiAgICAgICAgICAgIHJhdGVsaW1pdDogMSxcbiAgICAgICAgICAgIGNsaWVudFBlcm1pc3Npb25zOiBbXSxcbiAgICAgICAgICAgIHVzZXJQZXJtaXNzaW9uczogW10sXG4gICAgICAgICAgICBzeW50YXg6IFtcbiAgICAgICAgICAgICAgICBcInByb2ZpbGVcIixcbiAgICAgICAgICAgICAgICBcInByb2ZpbGUgVVNFUlwiLFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZXhlYyA9IGFzeW5jIChtZXNzYWdlLCBhcmd2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpZGVudGlmaWVyID0gYXJndi5fLmxlbmd0aCA/IGFyZ3YuX1swXSA6IG1lc3NhZ2UuYXV0aG9yLmlkO1xuICAgICAgICAgICAgY29uc3QgbWVtYmVyID0gaWRlbnRpZmllciA9PT0gbWVzc2FnZS5hdXRob3IuaWQgPyBtZXNzYWdlLm1lbWJlciA6IHRoaXMuY2xpZW50LnJlc29sdmVyLnJlc29sdmVHdWlsZE1lbWJlcihtZXNzYWdlLmd1aWxkLCBpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGlmICghbWVtYmVyKVxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcih0aGlzLmNsaWVudC5sb2NhbGUuZ2V0U3RyaW5nKFwiZW5fdXNcIiwgXCJlcnJvcnNcIiwgXCJtZW1iZXJOb3RGb3VuZFwiKSk7XG4gICAgICAgICAgICBjb25zdCB1c2VyUHJvZmlsZSA9IGlkZW50aWZpZXIgPT09IG1lc3NhZ2UuYXV0aG9yLmlkID8gbWVzc2FnZS5hdXRob3IuZG9jdW1lbnQgOiBhd2FpdCBVc2VyXzEuZGVmYXVsdC5maW5kQnlJZChpZGVudGlmaWVyKTtcbiAgICAgICAgICAgIGNvbnN0IG1lbWJlclByb2ZpbGUgPSBpZGVudGlmaWVyID09PSBtZXNzYWdlLmF1dGhvci5pZCA/IG1lbWJlci5kb2N1bWVudCA6IGF3YWl0IE1lbWJlcl8xLmRlZmF1bHQuZmluZE9uZSh7IHVzZXI6IGlkZW50aWZpZXIsIGd1aWxkOiBtZXNzYWdlLmd1aWxkLmlkIH0pO1xuICAgICAgICAgICAgaWYgKCF1c2VyUHJvZmlsZSB8fCAhbWVtYmVyUHJvZmlsZSlcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IodGhpcy5jbGllbnQubG9jYWxlLmdldFN0cmluZyhcImVuX3VzXCIsIFwiZXJyb3JzXCIsIFwicHJvZmlsZU5vdEZvdW5kXCIpKTtcbiAgICAgICAgICAgIGNvbnN0IHJhbmsgPSBhd2FpdCBNZW1iZXJfMS5kZWZhdWx0LmZpbmQoeyBndWlsZDogbWVzc2FnZS5ndWlsZC5pZCB9LCBudWxsLCB7IHNvcnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IC0xLFxuICAgICAgICAgICAgICAgICAgICBleHBlcmllbmNlOiAtMSxcbiAgICAgICAgICAgICAgICAgICAga2FybWE6IC0xLFxuICAgICAgICAgICAgICAgICAgICBiYWxhbmNlOiAtMSxcbiAgICAgICAgICAgICAgICB9IH0pLmNvdW50RG9jdW1lbnRzKHtcbiAgICAgICAgICAgICAgICAkb3I6IFtcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV2ZWw6IHsgJGd0OiBtZW1iZXJQcm9maWxlLmxldmVsIH0sXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldmVsOiBtZW1iZXJQcm9maWxlLmxldmVsLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwZXJpZW5jZTogeyAkZ3Q6IG1lbWJlclByb2ZpbGUuZXhwZXJpZW5jZSB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogbWVtYmVyUHJvZmlsZS5sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2U6IG1lbWJlclByb2ZpbGUuZXhwZXJpZW5jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGthcm1hOiB7ICRndDogbWVtYmVyUHJvZmlsZS5rYXJtYSB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogbWVtYmVyUHJvZmlsZS5sZXZlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4cGVyaWVuY2U6IG1lbWJlclByb2ZpbGUuZXhwZXJpZW5jZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGthcm1hOiBtZW1iZXJQcm9maWxlLmthcm1hLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmFsYW5jZTogeyAkZ3Q6IG1lbWJlclByb2ZpbGUuYmFsYW5jZSB9LFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnN0IHJlcXVpcmVkWFAgPSB7XG4gICAgICAgICAgICAgICAgY3VycmVudExldmVsOiBnYW1pZmljYXRpb24uY29tcHV0ZUV4cGVyaWVuY2UobWVtYmVyUHJvZmlsZS5sZXZlbCwgbWVzc2FnZS5ndWlsZC5kb2N1bWVudC5nYW1pZmljYXRpb24ubXVsdGlwbGllciksXG4gICAgICAgICAgICAgICAgbmV4dExldmVsOiBnYW1pZmljYXRpb24uY29tcHV0ZUV4cGVyaWVuY2UobWVtYmVyUHJvZmlsZS5sZXZlbCArIDEsIG1lc3NhZ2UuZ3VpbGQuZG9jdW1lbnQuZ2FtaWZpY2F0aW9uLm11bHRpcGxpZXIpLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IHRvdGFsUmVxdWlyZWRYUCA9IHtcbiAgICAgICAgICAgICAgICBjdXJyZW50TGV2ZWw6IG1lbWJlclByb2ZpbGUuZXhwZXJpZW5jZSAtIHJlcXVpcmVkWFAuY3VycmVudExldmVsLFxuICAgICAgICAgICAgICAgIG5leHRMZXZlbDogcmVxdWlyZWRYUC5uZXh0TGV2ZWwgLSByZXF1aXJlZFhQLmN1cnJlbnRMZXZlbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRQcm9ncmVzcyA9IHRvdGFsUmVxdWlyZWRYUC5jdXJyZW50TGV2ZWwgLyB0b3RhbFJlcXVpcmVkWFAubmV4dExldmVsICogMTAwO1xuICAgICAgICAgICAgbWVzc2FnZS5jaGFubmVsLnNlbmQoe1xuICAgICAgICAgICAgICAgIGVtYmVkOiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB1c2VyUHJvZmlsZS5jb2xvciB8fCB0ZXNzZXJhY3RfMS5Db25zdGFudHMuQ09MT1JTLklSSVMsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbWVtYmVyLnVzZXIudGFnLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJCYXN0aW9uIFByb2ZpbGVcIixcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHVzZXJQcm9maWxlLmluZm8sXG4gICAgICAgICAgICAgICAgICAgIGZpZWxkczogW1xuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiUmFua1wiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAocmFuayArIDEpLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkxldmVsXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1lbWJlclByb2ZpbGUubGV2ZWwudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiRXhwZXJpZW5jZVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBtZW1iZXJQcm9maWxlLmV4cGVyaWVuY2UudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiS2FybWFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbWVtYmVyUHJvZmlsZS5rYXJtYS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJCYXN0aW9uIENvaW5zXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG1lbWJlclByb2ZpbGUuYmFsYW5jZS50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlubGluZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogXCJQcm9ncmVzcyAtIFwiICsgdG90YWxSZXF1aXJlZFhQLmN1cnJlbnRMZXZlbCArIFwiIC8gXCIgKyB0b3RhbFJlcXVpcmVkWFAubmV4dExldmVsICsgXCIgLSBcIiArIE1hdGgucm91bmQoY3VycmVudFByb2dyZXNzKSArIFwiJVwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBcImBcIiArIHByb2dyZXNzXzEuZGVmYXVsdChjdXJyZW50UHJvZ3Jlc3MsIDM1KSArIFwiYFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBcIkNha2UgRGF5XCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHVzZXJQcm9maWxlLmNha2VEYXkgPyB1c2VyUHJvZmlsZS5jYWtlRGF5LnRvVVRDU3RyaW5nKCkgOiBcIi1cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmxpbmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwiTG9jYXRpb25cIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogdXNlclByb2ZpbGUubG9jYXRpb24gfHwgXCItXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5saW5lOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAgICAgdGh1bWJuYWlsOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVzZXJQcm9maWxlLmF2YXRhciB8fCBtZW1iZXIudXNlci5kaXNwbGF5QXZhdGFyVVJMKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkeW5hbWljOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDUxMixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBmb290ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IG1lbWJlci5pZCA9PT0gdGhpcy5jbGllbnQubG9jYWxlLmdldENvbnN0YW50KFwiYXV0aG9yLmRpc2NvcmQuaWRcIikgPyBcIk9oLCBoZXkhIEhlcmUncyBteSBkZXZlbG9wZXIhXCIgOiBcIlwiLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XG59OyJdfQ==